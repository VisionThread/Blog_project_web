ç
~C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Services\IServices\IBlogService.cs
	namespace 	
BlogApi2_backend
 
. 
Services #
.# $
	IServices$ -
{ 
public

 

	interface

 
IBlogReadService

 %
{ 
Task 
< 
IEnumerable 
< 
Blog 
> 
> 
GetBlogs  (
(( )
)) *
;* +
Task 
< 
Blog 
? 
> 
GetBlogById 
(  
int  #
id$ &
)& '
;' (
Task 
< 
IEnumerable 
< 
GetBlogTitleDto (
>( )
>) *
GetBlogByTitle+ 9
(9 :
string: @
titleA F
)F G
;G H
} 
public 

	interface 
IBlogWriteService &
{ 
Task 
< 
Blog 
> 

CreateBlog 
( 

AddBlogDto (
addBlog) 0
)0 1
;1 2
Task 
< 
bool 
> 

UpdateBlog 
( 
int !
id" $
,$ %
UpdateBlogDto& 3

updateBlog4 >
)> ?
;? @
} 
public 

	interface 
IBlogDeleteService '
{ 
Task 
< 
bool 
> 
DeleteBlogById !
(! "
int" %
id& (
)( )
;) *
Task 
< 
bool 
> 
DeleteAllBlogs !
(! "
)" #
;# $
} 
} €
ÄC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Services\IServices\IAuthorService.cs
	namespace 	
BlogApi2_backend
 
. 
Services #
.# $
	IServices$ -
{ 
public 

	interface 
IAuthorService #
{ 
Task 
< 
IEnumerable 
< 
Author 
>  
>  !
GetAllAuthors" /
(/ 0
)0 1
;1 2
Task

 
<

 
GetAuthorDto

 
?

 
>

 
GetAuthorById

 )
(

) *
int

* -
id

. 0
)

0 1
;

1 2
Task 
< 
IEnumerable 
< 
GetAuthorDto %
?% &
>& '
>' (
GetAuthorByName) 8
(8 9
string9 ?
name@ D
)D E
;E F
} 
public 

	interface 
IAuthorWriteService (
{ 
Task 
< 
Author 
> 
RegisterAuthor #
(# $
	AddAuthor$ -
	addAuthor. 7
)7 8
;8 9
Task 
< 
Author 
> 
LoginAuthor  
(  !
LoginDto! )
loginDto* 2
)2 3
;3 4
Task 
< 
Author 
> 
UpdateDetailAuthor '
(' (
int( +
id, .
,. /
UpdateAuthorDto0 ?
updateAuthorDto@ O
)O P
;P Q
} 
} ô5
uC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Services\AuthorService.cs
	namespace 	
BlogApi2_backend
 
. 
Services #
{		 
public

 

class

 
AuthorService

 
:

  
IAuthorService

! /
,

/ 0
IAuthorWriteService

1 D
{ 
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IAuthorRepository *
_authorRepository+ <
;< =
public 
AuthorService 
( 
BlogContext (
	dbcontext) 2
,2 3
IMapper4 ;
mapper< B
,B C
IAuthorRepositoryD U
authorRepositoryV f
)f g
{ 	
_mapper 
= 
mapper 
; 
_authorRepository 
= 
authorRepository  0
;0 1
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Author& ,
>, -
>- .
GetAllAuthors/ <
(< =
)= >
{ 	
return 
await 
_authorRepository *
.* +
GetAllAuthors+ 8
(8 9
)9 :
;: ;
} 	
public   
async   
Task   
<   
GetAuthorDto   &
?  & '
>  ' (
GetAuthorById  ) 6
(  6 7
int  7 :
id  ; =
)  = >
{!! 	
var"" 
author"" 
="" 
await"" 
_authorRepository"" 0
.""0 1
GetAuthorById""1 >
(""> ?
id""? A
)""A B
;""B C
return## 
_mapper## 
.## 
Map## 
<## 
GetAuthorDto## +
>##+ ,
(##, -
author##- 3
)##3 4
;##4 5
}$$ 	
public&& 
async&& 
Task&& 
<&& 
IEnumerable&& %
<&&% &
GetAuthorDto&&& 2
?&&2 3
>&&3 4
>&&4 5
GetAuthorByName&&6 E
(&&E F
string&&F L
name&&M Q
)&&Q R
{'' 	
var(( 
author(( 
=(( 
await(( 
_authorRepository(( 0
.((0 1
GetAuthorByName((1 @
(((@ A
name((A E
)((E F
;((F G
return)) 
_mapper)) 
.)) 
Map)) 
<)) 
IEnumerable))  +
<))+ ,
GetAuthorDto)), 8
>))8 9
>))9 :
()): ;
author)); A
)))A B
;))B C
},, 	
public11 
async11 
Task11 
<11 
Author11  
>11  !
LoginAuthor11" -
(11- .
LoginDto11. 6
loginDto117 ?
)11? @
{22 	
var33 
author33 
=33 
await33 
_authorRepository33 0
.330 1
LoginAuthor331 <
(33< =
loginDto33= E
.33E F
Email33F K
,33K L
loginDto33M U
.33U V
Password33V ^
)33^ _
;33_ `
if44 
(44 
author44 
==44 
null44 
)44 
{55 
throw66 
new66 
ArgumentException66 +
(66+ ,
$str66, G
)66G H
;66H I
}77 
return88 
author88 
;88 
}99 	
public;; 
async;; 
Task;; 
<;; 
Author;;  
>;;  !
RegisterAuthor;;" 0
(;;0 1
	AddAuthor;;1 :
	addAuthor;;; D
);;D E
{<< 	
var== 
existingAuthor== 
===  
await==! &
_authorRepository==' 8
.==8 9
GetAuthorByName==9 H
(==H I
	addAuthor==I R
.==R S
Email==S X
)==X Y
;==Y Z
if>> 
(>> 
existingAuthor>> 
!=>> !
null>>" &
)>>& '
{?? 
throw@@ 
new@@ 
ArgumentException@@ +
(@@+ ,
$str@@, J
)@@J K
;@@K L
}AA 
varCC 
authorEntityCC 
=CC 
_mapperCC &
.CC& '
MapCC' *
<CC* +
AuthorCC+ 1
>CC1 2
(CC2 3
	addAuthorCC3 <
)CC< =
;CC= >
awaitDD 
_authorRepositoryDD #
.DD# $
	AddAuthorDD$ -
(DD- .
authorEntityDD. :
)DD: ;
;DD; <
returnEE 
authorEntityEE 
;EE  
}FF 	
publicHH 
asyncHH 
TaskHH 
<HH 
AuthorHH  
>HH  !
UpdateDetailAuthorHH" 4
(HH4 5
intHH5 8
idHH9 ;
,HH; <
UpdateAuthorDtoHH= L
updateAuthorDtoHHM \
)HH\ ]
{II 	
varJJ 
authorJJ 
=JJ 
awaitJJ 
_authorRepositoryJJ 0
.JJ0 1
GetAuthorByIdJJ1 >
(JJ> ?
idJJ? A
)JJA B
;JJB C
ifKK 
(KK 
authorKK 
==KK 
nullKK 
)KK 
{LL 
throwMM 
newMM  
KeyNotFoundExceptionMM .
(MM. /
$strMM/ A
)MMA B
;MMB C
}NN 
authorOO 
.OO 
NameOO 
=OO 
updateAuthorDtoOO )
.OO) *
NameOO* .
??OO/ 1
authorOO2 8
.OO8 9
NameOO9 =
;OO= >
authorPP 
.PP 
EmailPP 
=PP 
updateAuthorDtoPP *
.PP* +
EmailPP+ 0
??PP1 3
authorPP4 :
.PP: ;
EmailPP; @
;PP@ A
ifQQ 
(QQ 
!QQ 
stringQQ 
.QQ 
IsNullOrEmptyQQ %
(QQ% &
updateAuthorDtoQQ& 5
.QQ5 6
PasswordQQ6 >
)QQ> ?
)QQ? @
{RR 
authorSS 
.SS 
PasswordSS 
=SS  !
updateAuthorDtoSS" 1
.SS1 2
PasswordSS2 :
;SS: ;
}TT 
awaitUU 
_authorRepositoryUU #
.UU# $
UpdateAuthorUU$ 0
(UU0 1
authorUU1 7
)UU7 8
;UU8 9
returnVV 
authorVV 
;VV 
}WW 	
}XX 
}YY ˇ

yC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Repository\IBlogRepository.cs
	namespace 	
BlogApi2_backend
 
. 

Repository %
{ 
public 

	interface 
IBlogRepository $
{ 
Task 
< 
Blog 
? 
> 
GetBlogById 
(  
int  #
id$ &
)& '
;' (
Task 
< 
IEnumerable 
< 
Blog 
> 
> 
GetBlogs  (
(( )
)) *
;* +
Task		 
<		 
IEnumerable		 
<		 
Blog		 
>		 
>		 
GetBlogsByTitle		  /
(		/ 0
string		0 6
title		7 <
)		< =
;		= >
Task

 

CreateBlog

 
(

 
Blog

 
blog

 !
)

! "
;

" #
Task 

UpdateBlog 
( 
Blog 
blog !
)! "
;" #
Task 

DeleteBlog 
( 
Blog 
blog !
)! "
;" #
Task 
DeleteAllBlogs 
( 
) 
; 
} 
} ª
{C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Repository\IAuthorRepository.cs
	namespace 	
BlogApi2_backend
 
. 

Repository %
{ 
public 

	interface 
IAuthorRepository &
{ 
Task 
< 
IEnumerable 
< 
Author 
>  
>  !
GetAllAuthors" /
(/ 0
)0 1
;1 2
Task 
< 
Author 
? 
> 
GetAuthorById #
(# $
int$ '
id( *
)* +
;+ ,
Task		 
<		 
IEnumerable		 
<		 
Author		 
>		  
>		  !
GetAuthorByName		" 1
(		1 2
string		2 8
name		9 =
)		= >
;		> ?
Task

 
	AddAuthor

 
(

 
Author

 
author

 $
)

$ %
;

% &
Task 
UpdateAuthor 
( 
Author  
author! '
)' (
;( )
Task 
< 
Author 
? 
> 
LoginAuthor !
(! "
string" (
email) .
,. /
string0 6
password7 ?
)? @
;@ A
} 
} °'
xC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Repository\BlogRepository.cs
	namespace 	
BlogApi2_backend
 
. 

Repository %
{ 
public 

class 
BlogRepository 
:  !
IBlogRepository" 1
{ 
private		 
readonly		 
BlogContext		 $

_dbcontext		% /
;		/ 0
public 
BlogRepository 
( 
BlogContext )
	dbContext* 3
)3 4
{ 	

_dbcontext 
= 
	dbContext "
;" #
} 	
public 
async 
Task 

CreateBlog $
($ %
Blog% )
blog* .
). /
{ 	
await 

_dbcontext 
. 
Blogs "
." #
AddAsync# +
(+ ,
blog, 0
)0 1
;1 2
await 

_dbcontext 
. 
SaveChangesAsync -
(- .
). /
;/ 0
} 	
public 
async 
Task 
DeleteAllBlogs (
(( )
)) *
{ 	
var 
blogs 
= 
await 

_dbcontext (
.( )
Blogs) .
.. /
ToListAsync/ :
(: ;
); <
;< =

_dbcontext 
. 
Blogs 
. 
RemoveRange (
(( )
blogs) .
). /
;/ 0
await 

_dbcontext 
. 
SaveChangesAsync -
(- .
). /
;/ 0
} 	
public 
async 
Task 

DeleteBlog $
($ %
Blog% )
blog* .
). /
{ 	

_dbcontext 
. 
Blogs 
. 
Remove #
(# $
blog$ (
)( )
;) *
await 

_dbcontext 
. 
SaveChangesAsync -
(- .
). /
;/ 0
}   	
public"" 
async"" 
Task"" 
<"" 
Blog"" 
?"" 
>""  
GetBlogById""! ,
("", -
int""- 0
id""1 3
)""3 4
{## 	
var$$ 
blog$$ 
=$$ 
await$$ 

_dbcontext$$ '
.$$' (
Blogs$$( -
.$$- .
Where$$. 3
($$3 4
b$$4 5
=>$$6 8
b$$9 :
.$$: ;
Id$$; =
==$$> @
id$$A C
)$$C D
.$$D E
Include$$E L
($$L M
b$$M N
=>$$O Q
b$$R S
.$$S T
Author$$T Z
)$$Z [
.%% 
FirstOrDefaultAsync%% '
(%%' (
)%%( )
;%%) *
return'' 
blog'' 
;'' 
}(( 	
public** 
async** 
Task** 
<** 
IEnumerable** %
<**% &
Blog**& *
>*** +
>**+ ,
GetBlogs**- 5
(**5 6
)**6 7
{++ 	
return,, 
await,, 

_dbcontext,, #
.,,# $
Blogs,,$ )
.,,) *
ToListAsync,,* 5
(,,5 6
),,6 7
;,,7 8
}-- 	
public// 
async// 
Task// 
<// 
IEnumerable// %
<//% &
Blog//& *
>//* +
>//+ ,
GetBlogsByTitle//- <
(//< =
string//= C
title//D I
)//I J
{00 	
return11 
await11 

_dbcontext11 #
.11# $
Blogs11$ )
.22 
Where22 
(22 
b22 
=>22 
b22  
.22  !
Title22! &
.22& '
ToLower22' .
(22. /
)22/ 0
.220 1
Contains221 9
(229 :
title22: ?
.22? @
ToLower22@ G
(22G H
)22H I
)22I J
)22J K
.33 
Include33 
(33 
b33 
=>33  
b33! "
.33" #
Author33# )
)33) *
.44 
ToListAsync44 
(44  
)44  !
;44! "
}55 	
public77 
async77 
Task77 

UpdateBlog77 $
(77$ %
Blog77% )
blog77* .
)77. /
{88 	

_dbcontext99 
.99 
Blogs99 
.99 
Update99 #
(99# $
blog99$ (
)99( )
;99) *
await:: 

_dbcontext:: 
.:: 
SaveChangesAsync:: -
(::- .
)::. /
;::/ 0
};; 	
}<< 
}== á
nC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\WeatherForecast.cs
	namespace 	
BlogApi2_backend
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateOnly 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ˝.
sC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Services\BlogService.cs
	namespace 	
BlogApi2_backend
 
. 
Services #
{ 
public		 

class		 
BlogService		 
:		 
IBlogReadService		 /
,		/ 0
IBlogWriteService		1 B
,		B C
IBlogDeleteService		D V
{

 
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IBlogRepository (
_blogRepository) 8
;8 9
public 
BlogService 
( 
IMapper "
mapper# )
,) *
IBlogRepository+ :
blogRepository; I
)I J
{ 	
_mapper 
= 
mapper 
; 
_blogRepository 
= 
blogRepository ,
;, -
} 	
public 
async 
Task 
< 
Blog 
? 
>  
GetBlogById! ,
(, -
int- 0
id1 3
)3 4
{ 	
return 
await 
_blogRepository (
.( )
GetBlogById) 4
(4 5
id5 7
)7 8
;8 9
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
GetBlogTitleDto& 5
>5 6
>6 7
GetBlogByTitle8 F
(F G
stringG M
titleN S
)S T
{ 	
var 
blogs 
= 
await 
_blogRepository -
.- .
GetBlogsByTitle. =
(= >
title> C
)C D
;D E
var!! 

final_blog!! 
=!! 
_mapper!! $
.!!$ %
Map!!% (
<!!( )
List!!) -
<!!- .
GetBlogTitleDto!!. =
>!!= >
>!!> ?
(!!? @
blogs!!@ E
)!!E F
;!!F G
return"" 

final_blog"" 
;"" 
}## 	
public%% 
async%% 
Task%% 
<%% 
IEnumerable%% %
<%%% &
Blog%%& *
>%%* +
>%%+ ,
GetBlogs%%- 5
(%%5 6
)%%6 7
{&& 	
var'' 
blogs'' 
='' 
await'' 
_blogRepository'' -
.''- .
GetBlogs''. 6
(''6 7
)''7 8
;''8 9
return)) 
blogs)) 
;)) 
}** 	
public// 
async// 
Task// 
<// 
Blog// 
>// 

CreateBlog//  *
(//* +

AddBlogDto//+ 5
addBlog//6 =
)//= >
{00 	
var11 

blogEntity11 
=11 
_mapper11 $
.11$ %
Map11% (
<11( )
Blog11) -
>11- .
(11. /
addBlog11/ 6
)116 7
;117 8

blogEntity22 
.22 
	CreatedAt22  
=22! "
DateTime22# +
.22+ ,
Now22, /
;22/ 0
await44 
_blogRepository44 !
.44! "

CreateBlog44" ,
(44, -

blogEntity44- 7
)447 8
;448 9
return66 

blogEntity66 
;66 
}77 	
public:: 
async:: 
Task:: 
<:: 
bool:: 
>:: 

UpdateBlog::  *
(::* +
int::+ .
id::/ 1
,::1 2
UpdateBlogDto::3 @

updateBlog::A K
)::K L
{;; 	
var<< 
blogToUpdate<< 
=<< 
await<< $
_blogRepository<<% 4
.<<4 5
GetBlogById<<5 @
(<<@ A
id<<A C
)<<C D
;<<D E
if>> 
(>> 
blogToUpdate>> 
==>> 
null>>  $
)>>$ %
{?? 
return@@ 
false@@ 
;@@ 
}AA 
blogToUpdateCC 
.CC 
TitleCC 
=CC  

updateBlogCC! +
.CC+ ,
TitleCC, 1
;CC1 2
blogToUpdateEE 
.EE 
ContentEE  
=EE! "

updateBlogEE# -
.EE- .
ContentEE. 5
;EE5 6
awaitGG 
_blogRepositoryGG !
.GG! "

UpdateBlogGG" ,
(GG, -
blogToUpdateGG- 9
)GG9 :
;GG: ;
returnHH 
trueHH 
;HH 
}II 	
publicOO 
asyncOO 
TaskOO 
<OO 
boolOO 
>OO 
DeleteBlogByIdOO  .
(OO. /
intOO/ 2
idOO3 5
)OO5 6
{PP 	
varQQ 
blogToDeleteQQ 
=QQ 
awaitQQ $
_blogRepositoryQQ% 4
.QQ4 5
GetBlogByIdQQ5 @
(QQ@ A
idQQA C
)QQC D
;QQD E
ifSS 
(SS 
blogToDeleteSS 
==SS 
nullSS  $
)SS$ %
{TT 
returnUU 
falseUU 
;UU 
}VV 
awaitXX 
_blogRepositoryXX !
.XX! "

DeleteBlogXX" ,
(XX, -
blogToDeleteXX- 9
)XX9 :
;XX: ;
returnYY 
trueYY 
;YY 
}ZZ 	
public\\ 
async\\ 
Task\\ 
<\\ 
bool\\ 
>\\ 
DeleteAllBlogs\\  .
(\\. /
)\\/ 0
{]] 	
await^^ 
_blogRepository^^ !
.^^! "
DeleteAllBlogs^^" 0
(^^0 1
)^^1 2
;^^2 3
return__ 
true__ 
;__ 
}`` 	
}aa 
}bb ˚#
zC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Repository\AuthorRepository.cs
	namespace 	
BlogApi2_backend
 
. 

Repository %
{ 
public		 

class		 
AuthorRepository		 !
:		" #
IAuthorRepository		$ 5
{

 
private 
readonly 
BlogContext $

_dbcontext% /
;/ 0
public 
AuthorRepository 
(  
BlogContext  +
	dbcontext, 5
)5 6
{ 	

_dbcontext 
= 
	dbcontext "
;" #
} 	
public 
async 
Task 
	AddAuthor #
(# $
Author$ *
author+ 1
)1 2
{ 	
await 

_dbcontext 
. 
Authors $
.$ %
AddAsync% -
(- .
author. 4
)4 5
;5 6
await 

_dbcontext 
. 
SaveChangesAsync -
(- .
). /
;/ 0
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Author& ,
>, -
>- .
GetAllAuthors/ <
(< =
)= >
{ 	
var 
authors 
= 
await 

_dbcontext  *
.* +
Authors+ 2
.2 3
ToListAsync3 >
(> ?
)? @
;@ A
return 
authors 
; 
} 	
public 
async 
Task 
< 
Author  
?  !
>! "
GetAuthorById# 0
(0 1
int1 4
id5 7
)7 8
{ 	
return 
await 

_dbcontext #
.# $
Authors$ +
.+ ,
Include, 3
(3 4
a4 5
=>6 8
a9 :
.: ;
Blogs; @
)@ A
.   
FirstOrDefaultAsync   $
(  $ %
a  % &
=>  ' )
a  * +
.  + ,
Id  , .
==  / 1
id  2 4
)  4 5
;  5 6
}!! 	
public## 
async## 
Task## 
<## 
IEnumerable## %
<##% &
Author##& ,
>##, -
>##- .
GetAuthorByName##/ >
(##> ?
string##? E
name##F J
)##J K
{$$ 	
return%% 
await%% 

_dbcontext%% #
.%%# $
Authors%%$ +
.&& 
Include&& 
(&& 
a&& 
=>&& 
a&& 
.&&  
Blogs&&  %
)&&% &
.'' 
Where'' 
('' 
a'' 
=>'' 
a'' 
.'' 
Name'' "
.''" #
ToLower''# *
(''* +
)''+ ,
.'', -
Contains''- 5
(''5 6
name''6 :
.'': ;
ToLower''; B
(''B C
)''C D
)''D E
)''E F
.(( 
ToListAsync(( 
((( 
)(( 
;(( 
})) 	
public++ 
async++ 
Task++ 
<++ 
Author++  
?++  !
>++! "
LoginAuthor++# .
(++. /
string++/ 5
email++6 ;
,++; <
string++= C
password++D L
)++L M
{,, 	
return-- 
await-- 

_dbcontext-- #
.--# $
Authors--$ +
... 
FirstOrDefaultAsync.. (
(..( )
a..) *
=>..+ -
a... /
.../ 0
Email..0 5
==..6 8
email..9 >
&&..? A
a..B C
...C D
Password..D L
==..M O
password..P X
)..X Y
;..Y Z
}00 	
public22 
async22 
Task22 
UpdateAuthor22 &
(22& '
Author22' -
author22. 4
)224 5
{33 	

_dbcontext44 
.44 
Authors44 
.44 
Update44 %
(44% &
author44& ,
)44, -
;44- .
await55 

_dbcontext55 
.55 
SaveChangesAsync55 -
(55- .
)55. /
;55/ 0
}66 	
}77 
}88 ¸+
fC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Program.cs
var

 
builder

 
=

 
WebApplication

 
.

 
CreateBuilder

 *
(

* +
args

+ /
)

/ 0
;

0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. 

AddOpenApi 
( 
) 
; 
builder 
. 
Services 
. 
AddDbContext 
< 
BlogContext )
>) *
(* +
options+ 2
=>3 5
options 
. 
	UseSqlite 
( 
builder 
. 
Configuration +
.+ ,
GetConnectionString, ?
(? @
$str@ S
)S T
)T U
)U V
;V W
builder 
. 
Services 
. 
	AddScoped 
< 
IBlogRepository *
,* +
BlogRepository, :
>: ;
(; <
)< =
;= >
builder 
. 
Services 
. 
	AddScoped 
< 
IBlogReadService +
,+ ,
BlogService- 8
>8 9
(9 :
): ;
;; <
builder 
. 
Services 
. 
	AddScoped 
< 
IBlogWriteService ,
,, -
BlogService. 9
>9 :
(: ;
); <
;< =
builder 
. 
Services 
. 
	AddScoped 
< 
IBlogDeleteService -
,- .
BlogService/ :
>: ;
(; <
)< =
;= >
builder 
. 
Services 
. 
	AddScoped 
< 
IAuthorRepository ,
,, -
AuthorRepository. >
>> ?
(? @
)@ A
;A B
builder 
. 
Services 
. 
	AddScoped 
< 
IAuthorService )
,) *
AuthorService+ 8
>8 9
(9 :
): ;
;; <
builder 
. 
Services 
. 
	AddScoped 
< 
IAuthorWriteService .
,. /
AuthorService0 =
>= >
(> ?
)? @
;@ A
builder 
. 
Services 
. 
AddCors 
( 
options  
=>! #
{   
options!! 
.!! 
	AddPolicy!! 
(!! 
$str!! +
,!!+ ,
policy!!- 3
=>!!4 6
{"" 
policy## 
.## 
WithOrigins## 
(## 
$str## 2
)##2 3
.$$ 
AllowAnyHeader$$ 
($$ 
)$$ 
.%% 
AllowAnyMethod%% 
(%% 
)%% 
;%%  
}&& 
)&& 
;&& 
}'' 
)'' 
;'' 
builder)) 
.)) 
Services)) 
.)) %
AddDistributedMemoryCache)) *
())* +
)))+ ,
;)), -
builder** 
.** 
Services** 
.** 

AddSession** 
(** 
options** #
=>**$ &
{++ 
options,, 
.,, 
IdleTimeout,, 
=,, 
TimeSpan,, "
.,," #
FromMinutes,,# .
(,,. /
$num,,/ 1
),,1 2
;,,2 3
options-- 
.-- 
Cookie-- 
.-- 
HttpOnly-- 
=-- 
true-- "
;--" #
options.. 
... 
Cookie.. 
... 
IsEssential.. 
=..  
true..! %
;..% &
}// 
)// 
;// 
IServiceCollection11 
serviceCollection11 $
=11% &
builder11' .
.11. /
Services11/ 7
.117 8
AddAutoMapper118 E
(11E F
typeof11F L
(11L M
AutoMapperConfig11M ]
)11] ^
)11^ _
;11_ `
var55 
app55 
=55 	
builder55
 
.55 
Build55 
(55 
)55 
;55 
if88 
(88 
app88 
.88 
Environment88 
.88 
IsDevelopment88 !
(88! "
)88" #
)88# $
{99 
app:: 
.:: 

MapOpenApi:: 
(:: 
):: 
;:: 
};; 
app>> 
.>> 
UseCors>> 
(>> 
$str>> !
)>>! "
;>>" #
app?? 
.?? 

UseSession?? 
(?? 
)?? 
;?? 
appAA 
.AA 
UseHttpsRedirectionAA 
(AA 
)AA 
;AA 
appCC 
.CC 
UseAuthorizationCC 
(CC 
)CC 
;CC 
appEE 
.EE 
MapControllersEE 
(EE 
)EE 
;EE 
appGG 
.GG 
RunGG 
(GG 
)GG 	
;GG	 
Ä	
wC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Entities\Comments.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Entities" *
{ 
public 

class 
Comments 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
required 
string 
CommentText *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
public

 
int

 
BlogId

 
{

 
get

 
;

  
set

! $
;

$ %
}

& '
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ñ
sC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Entities\Blog.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Entities" *
{ 
public 

class 
Blog 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
public		 
int		 
AuthorId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public 
Author 
? 
Author 
{ 
get  #
;# $
set% (
;( )
}* +
public 
List 
< 
Comments 
> 
Comments &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
=5 6
new7 :
List; ?
<? @
Comments@ H
>H I
(I J
)J K
;K L
} 
} ›

uC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Entities\Author.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Entities" *
{ 
public 

class 
Author 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
required 
string 
Name #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public		 
required		 
string		 
Email		 $
{		% &
get		' *
;		* +
set		, /
;		/ 0
}		1 2
public 
required 
string 
Password '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
List 
< 
Blog 
> 
Blogs 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
new0 3
List4 8
<8 9
Blog9 =
>= >
(> ?
)? @
;@ A
} 
} ‰
xC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\UpdateBlogDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
UpdateBlogDto 
{ 
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
} 
}		 ˛
zC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\UpdateAuthorDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
UpdateAuthorDto  
{ 
public 
required 
string 
Name #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
required 
string 
Email $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Password '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
}		 
}

 ¬
sC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\LoginDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
LoginDto 
{ 
public 
required 
string 
Email $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Password '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
}		 è
wC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\GetAuthorDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
GetAuthorDto 
{ 
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
public 
required 
string 

AuthorName )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
List 
< 
BlogDto 
> 
? 
Blogs #
{$ %
get& )
;) *
set+ .
;. /
}0 1
}		 
}

 ı
rC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\BlogDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
BlogDto 
{ 
public 
int 
BlogId 
{ 
get 
;  
set! $
;$ %
}& '
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
}		 
}

 µ	
zC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\GetBlogTitleDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
GetBlogTitleDto  
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
public		 
required		 
string		 

AuthorName		 )
{		* +
get		, /
;		/ 0
set		1 4
;		4 5
}		6 7
}

 
} ÷
uC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\AddComment.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 

AddComment 
{ 
public 
required 
string 
CommentText *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
DateTime2 :
.: ;
UtcNow; A
;A B
public 
required 
int 
BlogId "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ˝
uC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\AddBlogDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 

AddBlogDto 
{ 
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public		 
DateTime		 
	CreatedAt		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public

 
int

 
AuthorId

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
} 
} Ú
tC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\AddAuthor.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
	AddAuthor 
{ 
public 
required 
string 
Name #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
required 
string 
Email $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Password '
{( )
get+ .
;. /
set0 3
;3 4
}5 6
}		 
}

 ¢
ÉC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250408084008_NewChanges.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class 

NewChanges #
:$ %
	Migration& /
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ®
ÜC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250227113427_InitialCreate.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class 
InitialCreate &
:' (
	Migration) 2
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ∫
êC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250205072744_Blog navigation removed.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class !
Blognavigationremoved .
:/ 0
	Migration1 :
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ä
êC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250204111754_In comment-author added.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class  
Incommentauthoradded -
:. /
	Migration0 9
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
int' *
>* +
(+ ,
name 
: 
$str  
,  !
table 
: 
$str !
,! "
type 
: 
$str 
,  
nullable 
: 
false 
,  
defaultValue 
: 
$num 
)  
;  !
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str  
,  !
table 
: 
$str !
)! "
;" #
} 	
} 
} Ü
ÜC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250204111029_Commentupdatd.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class 
Commentupdatd &
:' (
	Migration) 2
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
RenameColumn )
() *
name 
: 
$str 
,  
table 
: 
$str !
,! "
newName 
: 
$str &
)& '
;' (
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
RenameColumn )
() *
name 
: 
$str #
,# $
table 
: 
$str !
,! "
newName 
: 
$str "
)" #
;# $
} 	
} 
} Ÿ
éC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250204110202_Comment section added.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public		 

partial		 
class		 
Commentsectionadded		 ,
:		- .
	Migration		/ 8
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
Content 
= 
table #
.# $
Column$ *
<* +
string+ 1
>1 2
(2 3
type3 7
:7 8
$str9 ?
,? @
nullableA I
:I J
falseK P
)P Q
,Q R
	CreatedAt 
= 
table  %
.% &
Column& ,
<, -
DateTime- 5
>5 6
(6 7
type7 ;
:; <
$str= C
,C D
nullableE M
:M N
falseO T
)T U
,U V
BlogId 
= 
table "
." #
Column# )
<) *
int* -
>- .
(. /
type/ 3
:3 4
$str5 >
,> ?
nullable@ H
:H I
falseJ O
)O P
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 2
,2 3
x4 5
=>6 8
x9 :
.: ;
Id; =
)= >
;> ?
table 
. 

ForeignKey $
($ %
name 
: 
$str 8
,8 9
column 
: 
x  !
=>" $
x% &
.& '
BlogId' -
,- .
principalTable &
:& '
$str( /
,/ 0
principalColumn '
:' (
$str) -
,- .
onDelete    
:    !
ReferentialAction  " 3
.  3 4
Cascade  4 ;
)  ; <
;  < =
}!! 
)!! 
;!! 
migrationBuilder## 
.## 
CreateIndex## (
(##( )
name$$ 
:$$ 
$str$$ *
,$$* +
table%% 
:%% 
$str%% !
,%%! "
column&& 
:&& 
$str&&  
)&&  !
;&&! "
}'' 	
	protected** 
override** 
void** 
Down**  $
(**$ %
MigrationBuilder**% 5
migrationBuilder**6 F
)**F G
{++ 	
migrationBuilder,, 
.,, 
	DropTable,, &
(,,& '
name-- 
:-- 
$str--  
)--  !
;--! "
}.. 	
}// 
}00 Ú
ÅC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250131105642_Initial4.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class 
Initial4 !
:" #
	Migration$ -
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str  
,  !
table 
: 
$str  
,  !
type 
: 
$str 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str  
,  !
table 
: 
$str  
)  !
;! "
} 	
} 
} ë.
ÜC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250131092651_Intialcreate1.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public		 

partial		 
class		 
Intialcreate1		 &
:		' (
	Migration		) 2
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
,  
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 <
,< =
nullable> F
:F G
falseH M
)M N
,N O
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 =
,= >
nullable? G
:G H
falseI N
)N O
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 1
,1 2
x3 4
=>5 7
x8 9
.9 :
Id: <
)< =
;= >
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id   
=   
table   
.   
Column   %
<  % &
int  & )
>  ) *
(  * +
type  + /
:  / 0
$str  1 :
,  : ;
nullable  < D
:  D E
false  F K
)  K L
.!! 

Annotation!! #
(!!# $
$str!!$ :
,!!: ;
true!!< @
)!!@ A
,!!A B
Title"" 
="" 
table"" !
.""! "
Column""" (
<""( )
string"") /
>""/ 0
(""0 1
type""1 5
:""5 6
$str""7 =
,""= >
nullable""? G
:""G H
false""I N
)""N O
,""O P
Content## 
=## 
table## #
.### $
Column##$ *
<##* +
string##+ 1
>##1 2
(##2 3
type##3 7
:##7 8
$str##9 ?
,##? @
nullable##A I
:##I J
false##K P
)##P Q
,##Q R
	CreatedAt$$ 
=$$ 
table$$  %
.$$% &
Column$$& ,
<$$, -
DateTime$$- 5
>$$5 6
($$6 7
type$$7 ;
:$$; <
$str$$= C
,$$C D
nullable$$E M
:$$M N
false$$O T
)$$T U
,$$U V
AuthorId%% 
=%% 
table%% $
.%%$ %
Column%%% +
<%%+ ,
int%%, /
>%%/ 0
(%%0 1
type%%1 5
:%%5 6
$str%%7 @
,%%@ A
nullable%%B J
:%%J K
false%%L Q
)%%Q R
}&& 
,&& 
constraints'' 
:'' 
table'' "
=>''# %
{(( 
table)) 
.)) 

PrimaryKey)) $
())$ %
$str))% /
,))/ 0
x))1 2
=>))3 5
x))6 7
.))7 8
Id))8 :
))): ;
;)); <
table** 
.** 

ForeignKey** $
(**$ %
name++ 
:++ 
$str++ 9
,++9 :
column,, 
:,, 
x,,  !
=>,," $
x,,% &
.,,& '
AuthorId,,' /
,,,/ 0
principalTable-- &
:--& '
$str--( 1
,--1 2
principalColumn.. '
:..' (
$str..) -
,..- .
onDelete//  
://  !
ReferentialAction//" 3
.//3 4
Cascade//4 ;
)//; <
;//< =
}00 
)00 
;00 
migrationBuilder22 
.22 
CreateIndex22 (
(22( )
name33 
:33 
$str33 )
,33) *
table44 
:44 
$str44 
,44 
column55 
:55 
$str55 "
)55" #
;55# $
}66 	
	protected99 
override99 
void99 
Down99  $
(99$ %
MigrationBuilder99% 5
migrationBuilder996 F
)99F G
{:: 	
migrationBuilder;; 
.;; 
	DropTable;; &
(;;& '
name<< 
:<< 
$str<< 
)<< 
;<< 
migrationBuilder>> 
.>> 
	DropTable>> &
(>>& '
name?? 
:?? 
$str?? 
)??  
;??  !
}@@ 	
}AA 
}BB ·
oC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Data\BlogContext.cs
	namespace 	
BlogApi2_backend
 
. 
Data 
{ 
public 

class 
BlogContext 
: 
	DbContext (
{ 
public 
BlogContext 
( 
DbContextOptions +
options, 3
)3 4
:5 6
base7 ;
(; <
options< C
)C D
{		 	
}

 	
public 
DbSet 
< 
Blog 
> 
Blogs  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Author 
> 
Authors $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DbSet 
< 
Comments 
> 
Comments '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
Blog  $
>$ %
(% &
)& '
. 
HasOne 
( 
b 
=> 
b 
. 
Author %
)% &
. 
WithMany 
( 
a 
=> 
a  
.  !
Blogs! &
)& '
. 
HasForeignKey 
( 
b  
=>! #
b$ %
.% &
AuthorId& .
). /
;/ 0
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
} 	
} 
} ö
ÑC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Controllers\WeatherForecastController.cs
	namespace 	
BlogApi2_backend
 
. 
Controllers &
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private		 
static		 
readonly		 
string		  &
[		& '
]		' (
	Summaries		) 2
=		3 4
new		5 8
[		8 9
]		9 :
{

 	
$str 
, 
$str !
,! "
$str# +
,+ ,
$str- 3
,3 4
$str5 ;
,; <
$str= C
,C D
$strE L
,L M
$strN S
,S T
$strU a
,a b
$strc n
} 	
;	 

private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str ,
), -
]- .
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
return 

Enumerable 
. 
Range #
(# $
$num$ %
,% &
$num' (
)( )
.) *
Select* 0
(0 1
index1 6
=>7 9
new: =
WeatherForecast> M
{ 
Date 
= 
DateOnly 
.  
FromDateTime  ,
(, -
DateTime- 5
.5 6
Now6 9
.9 :
AddDays: A
(A B
indexB G
)G H
)H I
,I J
TemperatureC 
= 
Random %
.% &
Shared& ,
., -
Next- 1
(1 2
-2 3
$num3 5
,5 6
$num7 9
)9 :
,: ;
Summary 
= 
	Summaries #
[# $
Random$ *
.* +
Shared+ 1
.1 2
Next2 6
(6 7
	Summaries7 @
.@ A
LengthA G
)G H
]H I
} 
) 
. 
ToArray 
( 
) 
; 
} 	
}   
}!! ˜5
|C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Controllers\CommentController.cs
	namespace		 	
BlogApi2_backend		
 
.		 
Controllers		 &
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
CommentController "
:# $
ControllerBase% 3
{ 
private 
readonly 
BlogContext $
	dbcontext% .
;. /
private 
readonly 
IMapper  
_mapper! (
;( )
public 
CommentController  
(  !
BlogContext! ,
	dbcontext- 6
,6 7
IMapper7 >
mapper? E
)E F
{ 	
this 
. 
	dbcontext 
= 
	dbcontext &
;& '
this 
. 
_mapper 
= 
mapper !
;! "
} 	
[ 	
HttpGet	 
( 
$str  
)  !
]! "
public 
async 
Task 
< 
IActionResult '
>' (
GetCommentsForBlog) ;
(; <
int< ?
blogId@ F
)F G
{ 	
var 
blog 
= 
await 
	dbcontext &
.& '
Blogs' ,
.  !
Where! &
(& '
b' (
=>) +
b, -
.- .
Id. 0
==1 3
blogId4 :
): ;
.    !
Select  ! '
(  ' (
b  ( )
=>  * ,
new  - 0
{!!  !
b""$ %
.""% &
Id""& (
,""( )
b##$ %
.##% &
Title##& +
,##+ ,
Comments$$$ ,
=$$- .
b$$/ 0
.$$0 1
Comments$$1 9
.$$9 :
Select$$: @
($$@ A
c$$A B
=>$$C E
new$$F I
{%%$ %
c&&( )
.&&) *
Id&&* ,
,&&, -
c''( )
.'') *
CommentText''* 5
,''5 6

AuthorName((( 2
=((3 4
	dbcontext((5 >
.((> ?
Authors((? F
.)), -
Where))- 2
())2 3
a))3 4
=>))5 7
a))8 9
.))9 :
Id)): <
==))= ?
c))@ A
.))A B
AuthorId))B J
)))J K
.**, -
Select**- 3
(**3 4
a**4 5
=>**6 8
a**9 :
.**: ;
Name**; ?
)**? @
.++, -
FirstOrDefault++- ;
(++; <
)++< =
,++= >
c,,( )
.,,) *
	CreatedAt,,* 3
}--$ %
)--% &
.--& '
ToList--' -
(--- .
)--. /
}..  !
)..! "
.//  !
FirstOrDefaultAsync//! 4
(//4 5
)//5 6
;//6 7
if00 
(00 
blog00 
==00 
null00 
)00 
{11 
return22 
NotFound22 
(22  
)22  !
;22! "
}33 
return55 
Ok55 
(55 
blog55 
.55 
Comments55 #
)55# $
;55$ %
}66 	
[88 	
HttpPost88	 
]88 
public99 
async99 
Task99 
<99 
IActionResult99 '
>99' (

AddComment99) 3
(993 4
[994 5
FromBody995 =
]99= >

AddComment99? I
addCommentDto99J W
)99W X
{:: 	
if;; 
(;; 
addCommentDto;; 
==;;  
null;;! %
);;% &
{<< 
return== 

BadRequest== !
(==! "
$str==" =
)=== >
;==> ?
}>> 
var@@ 
blog1@@ 
=@@ 
await@@ 
	dbcontext@@ '
.@@' (
Blogs@@( -
.@@- .
	FindAsync@@. 7
(@@7 8
addCommentDto@@8 E
.@@E F
BlogId@@F L
)@@L M
;@@M N
ifAA 
(AA 
blog1AA 
==AA 
nullAA 
)AA 
{BB 
returnCC 

BadRequestCC !
(CC! "
$strCC" L
)CCL M
;CCM N
}DD 
varHH 
authorHH 
=HH 
awaitHH 
	dbcontextHH (
.HH( )
AuthorsHH) 0
.HH0 1
	FindAsyncHH1 :
(HH: ;
addCommentDtoHH; H
.HHH I
AuthorIdHHI Q
)HHQ R
;HHR S
ifII 
(II 
authorII 
==II 
nullII 
)II 
returnJJ 

BadRequestJJ !
(JJ! "
$strJJ" P
)JJP Q
;JJQ R
varLL 
commentLL 
=LL 
_mapperLL !
.LL! "
MapLL" %
<LL% &
CommentsLL& .
>LL. /
(LL/ 0
addCommentDtoLL0 =
)LL= >
;LL> ?
	dbcontextPP 
.PP 
CommentsPP 
.PP 
AddPP "
(PP" #
commentPP# *
)PP* +
;PP+ ,
awaitQQ 
	dbcontextQQ 
.QQ 
SaveChangesAsyncQQ ,
(QQ, -
)QQ- .
;QQ. /
returnTT 
CreatedAtActionTT "
(TT" #
nameofTT# )
(TT) *
GetCommentByIdTT* 8
)TT8 9
,TT9 :
newTT; >
{TT? @
idTTA C
=TTD E
commentTTF M
.TTM N
IdTTN P
}TTQ R
,TTR S
commentTTT [
)TT[ \
;TT\ ]
}UU 	
[WW 	
HttpGetWW	 
(WW 
$strWW 
)WW 
]WW 
publicXX 
asyncXX 
TaskXX 
<XX 
ActionResultXX &
<XX& '
CommentsXX' /
>XX/ 0
>XX0 1
GetCommentByIdXX2 @
(XX@ A
intXXA D
idXXE G
)XXG H
{YY 	
varZZ 
commentZZ 
=ZZ 
awaitZZ 
	dbcontextZZ  )
.ZZ) *
CommentsZZ* 2
.ZZ2 3
	FindAsyncZZ3 <
(ZZ< =
idZZ= ?
)ZZ? @
;ZZ@ A
if[[ 
([[ 
comment[[ 
==[[ 
null[[ 
)[[  
{\\ 
return]] 
NotFound]] 
(]]  
)]]  !
;]]! "
}^^ 
return__ 
comment__ 
;__ 
}`` 	
}cc 
}dd Ûf
yC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Controllers\BlogController.cs
	namespace 	
BlogApi2_backend
 
. 
Controllers &
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
BlogController 
:  !
ControllerBase" 0
{ 
private 
readonly 
IBlogReadService )
_blogReadService* :
;: ;
private 
readonly 
IBlogWriteService *
_blogWriteService+ <
;< =
private 
readonly 
IBlogDeleteService +
_blogDeleteService, >
;> ?
private 
int &
GetStatusCodeFromException .
(. /
	Exception/ 8
exp9 <
)< =
{ 	
switch 
( 
exp 
) 
{ 
case   
SqliteException   $
_  % &
:  & '
return  ( .
(  / 0
int  0 3
)  3 4
HttpStatusCode  4 B
.  B C
InternalServerError  C V
;  V W
case!! 
ArgumentException!! &
_!!' (
:!!( )
return!!* 0
(!!1 2
int!!2 5
)!!5 6
HttpStatusCode!!6 D
.!!D E

BadRequest!!E O
;!!O P
case"" %
InvalidOperationException"" .
_""/ 0
:""0 1
return""2 8
(""9 :
int"": =
)""= >
HttpStatusCode""> L
.""L M

BadRequest""M W
;""W X
case## 
TimeoutException## %
_##& '
:##' (
return##) /
(##0 1
int##1 4
)##4 5
HttpStatusCode##5 C
.##C D
RequestTimeout##D R
;##R S
default$$ 
:$$ 
return$$ 
($$  !
int$$! $
)$$$ %
HttpStatusCode$$% 3
.$$3 4
InternalServerError$$4 G
;$$G H
}%% 
}&& 	
public(( 
BlogController(( 
((( 
IBlogReadService(( .
blogReadService((/ >
,((> ?
IBlogWriteService((@ Q
blogWriteService((R b
,((b c
IBlogDeleteService((c u
blogDeleteService	((v á
)
((á à
{** 	
_blogReadService++ 
=++ 
blogReadService++ .
;++. /
_blogWriteService,, 
=,, 
blogWriteService,,  0
;,,0 1
_blogDeleteService-- 
=--  
blogDeleteService--! 2
;--2 3
}.. 	
[22 	
HttpGet22	 
]22 
public33 
async33 
Task33 
<33 
IActionResult33 '
>33' (
GetBlogs33) 1
(331 2
)332 3
{44 	
var55 
blogs55 
=55 
await55 
_blogReadService55 -
.55- .
GetBlogs55. 6
(556 7
)557 8
;558 9
return77 
Ok77 
(77 
blogs77 
)77 
;77 
}88 	
[;; 	
HttpGet;;	 
(;; 
$str;; 
);; 
];; 
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
GetBlogByTitle<<) 7
(<<7 8
[<<8 9
	FromQuery<<9 B
]<<B C
string<<D J
title<<K P
)<<P Q
{== 	
var>> 
blogs>> 
=>> 
await>> 
_blogReadService>> .
.>>. /
GetBlogByTitle>>/ =
(>>= >
title>>> C
)>>C D
;>>D E
if?? 
(?? 
blogs?? 
==?? 
null?? 
)?? 
{@@ 
returnAA 
NotFoundAA 
(AA  
newAA  #
{AA$ %
MessageAA% ,
=AA- .
$strAA. >
}AA> ?
)AA? @
;AA@ A
}BB 
returnDD 
OkDD 
(DD 
blogsDD 
)DD 
;DD 
}EE 	
[HH 	
HttpGetHH	 
(HH 
$strHH 
)HH 
]HH 
publicII 
asyncII 
TaskII 
<II 
IActionResultII '
>II' (
GetBlogByIdII) 4
(II4 5
intII5 8
idII9 ;
)II; <
{JJ 	
tryKK 
{LL 
varMM 
blogMM 
=MM 
awaitMM  
_blogReadServiceMM! 1
.MM1 2
GetBlogByIdMM2 =
(MM= >
idMM> @
)MM@ A
;MMA B
ifNN 
(NN 
blogNN 
==NN 
nullNN  
)NN  !
{OO 
returnPP 
NotFoundPP #
(PP# $
newPP$ '
{PP( )
MessagePP* 1
=PP2 3
$strPP4 D
}PPE F
)PPF G
;PPG H
}QQ 
varRR 
blogResponseRR  
=RR! "
newRR# &
{SS 
blogTT 
.TT 
IdTT 
,TT 
blogUU 
.UU 
TitleUU 
,UU 
blogVV 
.VV 
ContentVV  
,VV  !
blogWW 
.WW 
	CreatedAtWW "
,WW" #
blogXX 
.XX 
AuthorXX 
?XX  
.XX  !
NameXX! %
}YY 
;YY 
returnZZ 
OkZZ 
(ZZ 
blogResponseZZ &
)ZZ& '
;ZZ' (
}[[ 
catch\\ 
(\\ 
	Exception\\ 
ex\\ 
)\\  
{]] 
return^^ 

StatusCode^^ !
(^^! "
$num^^" %
,^^% &
new^^' *
{^^+ ,
Message^^- 4
=^^5 6
$str^^7 J
,^^J K
Error^^L Q
=^^R S
ex^^T V
.^^V W
Message^^W ^
}^^_ `
)^^` a
;^^a b
}`` 
}bb 	
[ee 	
HttpPostee	 
]ee 
publicff 
asyncff 
Taskff 
<ff 
IActionResultff '
>ff' (

CreateBlogff) 3
(ff3 4
[ff4 5
FromBodyff5 =
]ff= >

AddBlogDtoff? I
addBlogffJ Q
)ffQ R
{gg 	
tryhh 
{ii 
varjj 
blogjj 
=jj 
awaitjj 
_blogWriteServicejj 0
.jj0 1

CreateBlogjj1 ;
(jj; <
addBlogjj< C
)jjC D
;jjD E
returnkk 
Okkk 
(kk 
blogkk 
)kk 
;kk  
}ll 
catchmm 
(mm 
	Exceptionmm 
exmm 
)mm  
{nn 
varoo 

statusCodeoo 
=oo  &
GetStatusCodeFromExceptionoo! ;
(oo; <
exoo< >
)oo> ?
;oo? @
returnpp 

StatusCodepp !
(pp! "

statusCodepp" ,
,pp, -
newpp. 1
{pp2 3
messagepp4 ;
=pp< =
$strpp> N
,ppN O
detailsppP W
=ppX Y
exppZ \
.pp\ ]
Messagepp] d
}ppe f
)ppf g
;ppg h
}qq 
}rr 	
[uu 	
HttpPutuu	 
(uu 
$struu 
)uu 
]uu 
publicvv 
asyncvv 
Taskvv 
<vv 
IActionResultvv '
>vv' (

UpdateBlogvv) 3
(vv3 4
intvv4 7
idvv8 :
,vv: ;
[vv< =
FromBodyvv= E
]vvE F
UpdateBlogDtovvG T

updateBlogvvU _
)vv_ `
{ww 	
tryxx 
{yy 
varzz 
blogToUpdatezz  
=zz! "
awaitzz# (
_blogWriteServicezz) :
.zz: ;

UpdateBlogzz; E
(zzE F
idzzF H
,zzH I

updateBlogzzJ T
)zzT U
;zzU V
if{{ 
({{ 
!{{ 
blogToUpdate{{  
){{  !
{|| 
return}} 
NotFound}} "
(}}" #
new}}# &
{}}' (
Message}}) 0
=}}1 2
$str}}3 C
}}}D E
)}}E F
;}}F G
}~~ 
return
ÄÄ 
Ok
ÄÄ 
(
ÄÄ 
new
ÄÄ 
{
ÄÄ 
Message
ÄÄ  '
=
ÄÄ( )
$str
ÄÄ* E
,
ÄÄE F
Blog
ÄÄG K
=
ÄÄL M
blogToUpdate
ÄÄN Z
}
ÄÄ[ \
)
ÄÄ\ ]
;
ÄÄ] ^
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
ex
ÇÇ 
)
ÇÇ  
{
ÉÉ 
var
ÑÑ 

statusCode
ÑÑ 
=
ÑÑ  (
GetStatusCodeFromException
ÑÑ! ;
(
ÑÑ; <
ex
ÑÑ< >
)
ÑÑ> ?
;
ÑÑ? @
return
ÖÖ 

StatusCode
ÖÖ !
(
ÖÖ! "

statusCode
ÖÖ" ,
,
ÖÖ, -
new
ÖÖ. 1
{
ÖÖ2 3
message
ÖÖ4 ;
=
ÖÖ< =
$str
ÖÖ> N
,
ÖÖN O
details
ÖÖP W
=
ÖÖX Y
ex
ÖÖZ \
.
ÖÖ\ ]
Message
ÖÖ] d
}
ÖÖe f
)
ÖÖf g
;
ÖÖg h
}
ÜÜ 
}
áá 	
[
ää 	

HttpDelete
ää	 
(
ää 
$str
ää 
)
ää 
]
ää 
public
ãã 
async
ãã 
Task
ãã 
<
ãã 
IActionResult
ãã '
>
ãã' (
DeleteBlogById
ãã) 7
(
ãã7 8
int
ãã8 ;
id
ãã< >
)
ãã> ?
{
åå 	
try
çç 
{
éé 
var
èè 
blogToDelete
èè  
=
èè! "
await
èè# ( 
_blogDeleteService
èè) ;
.
èè; <
DeleteBlogById
èè< J
(
èèJ K
id
èèK M
)
èèM N
;
èèN O
if
ëë 
(
ëë 
!
ëë 
blogToDelete
ëë !
)
ëë! "
{
íí 
return
ìì 
NotFound
ìì #
(
ìì# $
new
ìì$ '
{
ìì( )
Message
ìì* 1
=
ìì2 3
$str
ìì4 D
}
ììE F
)
ììF G
;
ììG H
}
îî 
return
ïï 
Ok
ïï 
(
ïï 
new
ïï 
{
ïï 
Message
ïï  '
=
ïï( )
$str
ïï* E
}
ïïF G
)
ïïG H
;
ïïH I
}
ññ 
catch
óó 
(
óó 
	Exception
óó 
ex
óó 
)
óó  
{
òò 
var
ôô 

statusCode
ôô 
=
ôô  (
GetStatusCodeFromException
ôô! ;
(
ôô; <
ex
ôô< >
)
ôô> ?
;
ôô? @
return
öö 

StatusCode
öö !
(
öö! "

statusCode
öö" ,
,
öö, -
new
öö. 1
{
öö2 3
message
öö4 ;
=
öö< =
$str
öö> N
,
ööN O
details
ööP W
=
ööX Y
ex
ööZ \
.
öö\ ]
Message
öö] d
}
ööe f
)
ööf g
;
öög h
}
õõ 
}
úú 	
[
üü 	

HttpDelete
üü	 
]
üü 
public
†† 
async
†† 
Task
†† 
<
†† 
IActionResult
†† '
>
††' (
DeleteAllBlogs
††) 7
(
††7 8
)
††8 9
{
°° 	
try
¢¢ 
{
££ 
var
§§ 
blogsToBeDeleted
§§ $
=
§§% &
await
§§' , 
_blogDeleteService
§§- ?
.
§§? @
DeleteAllBlogs
§§@ N
(
§§N O
)
§§O P
;
§§P Q
if
¶¶ 
(
¶¶ 
!
¶¶ 
blogsToBeDeleted
¶¶ %
)
¶¶% &
{
ßß 
return
®® 
NotFound
®® #
(
®®# $
$str
®®$ >
)
®®> ?
;
®®? @
}
©© 
return
´´ 
Ok
´´ 
(
´´ 
$str
´´ :
)
´´: ;
;
´´; <
}
¨¨ 
catch
≠≠ 
(
≠≠ 
	Exception
≠≠ 
ex
≠≠ 
)
≠≠  
{
ÆÆ 
var
ØØ 

statusCode
ØØ 
=
ØØ  (
GetStatusCodeFromException
ØØ! ;
(
ØØ; <
ex
ØØ< >
)
ØØ> ?
;
ØØ? @
return
∞∞ 

StatusCode
∞∞ !
(
∞∞! "

statusCode
∞∞" ,
,
∞∞, -
new
∞∞. 1
{
∞∞2 3
message
∞∞4 ;
=
∞∞< =
$str
∞∞> N
,
∞∞N O
details
∞∞P W
=
∞∞X Y
ex
∞∞Z \
.
∞∞\ ]
Message
∞∞] d
}
∞∞e f
)
∞∞f g
;
∞∞g h
}
±± 
}
≤≤ 	
}
µµ 
}∂∂ î
}C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Configuration\AutoMapperConfig.cs
	namespace 	
BlogApi2_backend
 
. 
Configuration (
{ 
public 

class 
AutoMapperConfig !
:" #
Profile$ +
{ 
public		 
AutoMapperConfig		 
(		  
)		  !
{

 	
	CreateMap 
< 

AddComment  
,  !
Comments" *
>* +
(+ ,
), -
.- .

ReverseMap. 8
(8 9
)9 :
;: ;
	CreateMap 
< 
Blog 
, 
GetBlogTitleDto +
>+ ,
(, -
)- .
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (

AuthorName( 2
,2 3
opt4 7
=>8 :
opt; >
.> ?
MapFrom? F
(F G
srcG J
=>K M
srcN Q
.Q R
AuthorR X
!=Y [
null\ `
?a b
srcc f
.f g
Authorg m
.m n
Namen r
:s t
stringu {
.{ |
Empty	| Å
)
Å Ç
)
Ç É
;
É Ñ
	CreateMap 
< 

AddBlogDto  
,  !
Blog" &
>& '
(' (
)( )
.) *

ReverseMap* 4
(4 5
)5 6
;6 7
	CreateMap 
< 
UpdateBlogDto #
,# $
Blog% )
>) *
(* +
)+ ,
., -

ReverseMap- 7
(7 8
)8 9
;9 :
	CreateMap 
< 
Author 
, 
GetAuthorDto *
>* +
(+ ,
), -
. 
	ForMember 
( 
dest 
=> 
dest #
.# $
AuthorId$ ,
,, -
opt. 1
=>2 4
opt5 8
.8 9
MapFrom9 @
(@ A
srcA D
=>E G
srcH K
.K L
IdL N
)N O
)O P
. 
	ForMember 
( 
dest 
=> 
dest #
.# $

AuthorName$ .
,. /
opt0 3
=>4 6
opt7 :
.: ;
MapFrom; B
(B C
srcC F
=>G I
srcJ M
.M N
NameN R
)R S
)S T
. 
	ForMember 
( 
dest 
=> 
dest #
.# $
Blogs$ )
,) *
opt+ .
=>/ 1
opt2 5
.5 6
MapFrom6 =
(= >
src> A
=>B D
srcE H
.H I
BlogsI N
)N O
)O P
;P Q
	CreateMap 
< 
Blog 
, 
BlogDto #
># $
($ %
)% &
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
BlogId( .
,. /
opt0 3
=>4 6
opt7 :
.: ;
MapFrom; B
(B C
srcC F
=>G I
srcJ M
.M N
IdN P
)P Q
)Q R
;R S
	CreateMap 
< 
	AddAuthor 
,  
Author! '
>' (
(( )
)) *
;* +
} 	
} 
} ñ\
{C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Controllers\AuthorController.cs
	namespace 	
BlogApi2_backend
 
. 
Controllers &
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
AuthorController !
:" #
ControllerBase$ 2
{ 
private 
readonly 
IAuthorService '
_authorService( 6
;6 7
private 
readonly 
IAuthorWriteService ,
_authorWriteService- @
;@ A
private 
int &
GetStatusCodeFromException .
(. /
	Exception/ 8
exp9 <
)< =
{ 	
switch 
( 
exp 
) 
{ 
case 
SqliteException $
_% &
:& '
return( .
(/ 0
int0 3
)3 4
HttpStatusCode4 B
.B C
InternalServerErrorC V
;V W
case   
ArgumentException   &
_  ' (
:  ( )
return  * 0
(  1 2
int  2 5
)  5 6
HttpStatusCode  6 D
.  D E

BadRequest  E O
;  O P
case!! %
InvalidOperationException!! .
_!!/ 0
:!!0 1
return!!2 8
(!!9 :
int!!: =
)!!= >
HttpStatusCode!!> L
.!!L M

BadRequest!!M W
;!!W X
case"" 
TimeoutException"" %
_""& '
:""' (
return"") /
(""0 1
int""1 4
)""4 5
HttpStatusCode""5 C
.""C D
RequestTimeout""D R
;""R S
default## 
:## 
return## 
(##  !
int##! $
)##$ %
HttpStatusCode##% 3
.##3 4
InternalServerError##4 G
;##G H
}$$ 
}%% 	
public'' 
AuthorController'' 
(''  
IAuthorService''  .
authorService''/ <
,''< =
IAuthorWriteService''= P
authorWriteService''Q c
)''c d
{(( 	
_authorService** 
=** 
authorService** *
;*** +
_authorWriteService++ 
=++  !
authorWriteService++" 4
;++4 5
}-- 	
[00 	
HttpGet00	 
]00 
public11 
async11 
Task11 
<11 
IActionResult11 '
>11' (

GetAuthors11) 3
(113 4
)114 5
{22 	
var33 
authors33 
=33 
await33 
_authorService33  .
.33. /
GetAllAuthors33/ <
(33< =
)33= >
;33> ?
return44 
Ok44 
(44 
authors44 
)44 
;44 
}55 	
[88 	
HttpGet88	 
(88 
$str88 
)88 
]88 
public99 
async99 
Task99 
<99 
IActionResult99 '
>99' (
GetAuthorById99) 6
(996 7
int997 :
id99; =
)99= >
{:: 	
try;; 
{<< 
var== 
author== 
=== 
await== "
_authorService==# 1
.==1 2
GetAuthorById==2 ?
(==? @
id==@ B
)==B C
;==C D
if?? 
(?? 
author?? 
==?? 
null?? "
)??" #
{@@ 
returnAA 
NotFoundAA #
(AA# $
newAA$ '
{AA( )
MessageAA* 1
=AA2 3
$strAA4 F
}AAG H
)AAH I
;AAI J
}BB 
returnDD 
OkDD 
(DD 
authorDD  
)DD  !
;DD! "
}EE 
catchFF 
(FF 
	ExceptionFF 
exFF 
)FF  
{GG 
varHH 

statusCodeHH 
=HH  &
GetStatusCodeFromExceptionHH! ;
(HH; <
exHH< >
)HH> ?
;HH? @
returnII 

StatusCodeII !
(II! "

statusCodeII" ,
,II, -
newII. 1
{II2 3
messageII4 ;
=II< =
$strII> N
,IIN O
detailsIIP W
=IIX Y
exIIZ \
.II\ ]
MessageII] d
}IIe f
)IIf g
;IIg h
}JJ 
}KK 	
[NN 	
HttpGetNN	 
(NN 
$strNN 
)NN 
]NN 
publicOO 
asyncOO 
TaskOO 
<OO 
IActionResultOO '
>OO' (
	GetAuthorOO) 2
(OO2 3
[OO3 4
	FromQueryOO4 =
]OO= >
stringOO? E
nameOOF J
)OOJ K
{PP 	
tryQQ 
{RR 
varSS 
authorSS 
=SS 
awaitSS "
_authorServiceSS# 1
.SS1 2
GetAuthorByNameSS2 A
(SSA B
nameSSB F
)SSF G
;SSG H
ifTT 
(TT 
authorTT 
==TT 
nullTT "
)TT" #
{UU 
returnVV 
NotFoundVV #
(VV# $
newVV$ '
{VV( )
MessageVV* 1
=VV2 3
$strVV4 F
}VVG H
)VVH I
;VVI J
}WW 
returnYY 
OkYY 
(YY 
authorYY  
)YY  !
;YY! "
}ZZ 
catch[[ 
([[ 
	Exception[[ 
ex[[ 
)[[  
{\\ 
var]] 

statusCode]] 
=]]  &
GetStatusCodeFromException]]! ;
(]]; <
ex]]< >
)]]> ?
;]]? @
return^^ 

StatusCode^^ !
(^^! "

statusCode^^" ,
,^^, -
new^^. 1
{^^2 3
message^^4 ;
=^^< =
$str^^> N
,^^N O
details^^P W
=^^X Y
ex^^Z \
.^^\ ]
Message^^] d
}^^e f
)^^f g
;^^g h
}__ 
}`` 	
[cc 	
HttpPostcc	 
(cc 
$strcc 
)cc 
]cc 
publicdd 
asyncdd 
Taskdd 
<dd 
IActionResultdd '
>dd' (
Logindd) .
(dd. /
[dd/ 0
FromBodydd0 8
]dd8 9
LoginDtodd: B
loginDtoddC K
)ddK L
{ee 	
tryff 
{gg 
ifhh 
(hh 
loginDtohh 
==hh 
nullhh  $
||hh% '
stringhh( .
.hh. /
IsNullOrWhiteSpacehh/ A
(hhA B
loginDtohhB J
.hhJ K
EmailhhK P
)hhP Q
||hhR T
stringhhU [
.hh[ \
IsNullOrWhiteSpacehh\ n
(hhn o
loginDtohho w
.hhw x
Password	hhx Ä
)
hhÄ Å
)
hhÅ Ç
{ii 
returnjj 

BadRequestjj %
(jj% &
newjj& )
{jj* +
Messagejj, 3
=jj4 5
$strjj6 X
}jjY Z
)jjZ [
;jj[ \
}kk 
varmm 
authormm 
=mm 
awaitmm "
_authorWriteServicemm# 6
.mm6 7
LoginAuthormm7 B
(mmB C
loginDtommC K
)mmK L
;mmL M
ifnn 
(nn 
authornn 
==nn 
nullnn "
)nn" #
{oo 
returnpp 
Unauthorizedpp '
(pp' (
newpp( +
{pp, -
Messagepp. 5
=pp6 7
$strpp8 M
}ppN O
)ppO P
;ppP Q
}qq 
returnss 
Okss 
(ss 
newss 
{ss 
Messagess  '
=ss( )
$strss* <
,ss< =
AuthorIdss> F
=ssG H
authorssI O
.ssO P
IdssP R
,ssR S
NamessT X
=ssY Z
authorss[ a
.ssa b
Namessb f
}ssg h
)ssh i
;ssi j
}tt 
catchuu 
(uu 
	Exceptionuu 
exuu 
)uu  
{vv 
returnww 
Unauthorizedww #
(ww# $
newww$ '
{ww( )
Messageww* 1
=ww2 3
$strww4 I
+wwJ K
exwwL N
.wwN O
MessagewwO V
}wwW X
)wwX Y
;wwY Z
}xx 
}yy 	
[}} 	
HttpPost}}	 
(}} 
$str}} 
)}} 
]}} 
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
Register~~) 1
(~~1 2
[~~2 3
FromBody~~3 ;
]~~; <
	AddAuthor~~= F
	addAuthor~~G P
)~~P Q
{ 	
try
ÄÄ 
{
ÅÅ 
var
ÇÇ 
	newauthor
ÇÇ 
=
ÇÇ 
await
ÇÇ  %!
_authorWriteService
ÇÇ& 9
.
ÇÇ9 :
RegisterAuthor
ÇÇ: H
(
ÇÇH I
	addAuthor
ÇÇI R
)
ÇÇR S
;
ÇÇS T
return
ÑÑ 
CreatedAtAction
ÑÑ &
(
ÑÑ& '
nameof
ÑÑ' -
(
ÑÑ- .

GetAuthors
ÑÑ. 8
)
ÑÑ8 9
,
ÑÑ9 :
new
ÑÑ; >
{
ÑÑ? @
id
ÑÑA C
=
ÑÑD E
	newauthor
ÑÑF O
.
ÑÑO P
Id
ÑÑP R
}
ÑÑS T
,
ÑÑT U
	newauthor
ÑÑV _
)
ÑÑ_ `
;
ÑÑ` a
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ 
	Exception
ÜÜ 
ex
ÜÜ 
)
ÜÜ 
{
áá 
return
àà 

BadRequest
àà !
(
àà! "
new
àà" %
{
àà& '
message
àà( /
=
àà0 1
ex
àà2 4
.
àà4 5
Message
àà5 <
}
àà= >
)
àà> ?
;
àà? @
}
ââ 
}
ää 	
[
èè 	
HttpPut
èè	 
(
èè 
$str
èè 
)
èè 
]
èè 
public
êê 
async
êê 
Task
êê 
<
êê 
IActionResult
êê '
>
êê' (
UpdateAuthor
êê) 5
(
êê5 6
int
êê6 9
id
êê: <
,
êê< =
[
êê> ?
FromBody
êê? G
]
êêG H
UpdateAuthorDto
êêI X
updateAuthorDto
êêY h
)
êêh i
{
ëë 	
try
íí 
{
ìì 
var
ïï 
updatedAuthor
ïï  
=
ïï! "
await
ïï# (!
_authorWriteService
ïï) <
.
ïï< = 
UpdateDetailAuthor
ïï= O
(
ïïO P
id
ïïP R
,
ïïR S
updateAuthorDto
ïïT c
)
ïïc d
;
ïïd e
return
óó 
Ok
óó 
(
óó 
new
óó 
{
óó 
Message
óó  '
=
óó( )
$str
óó* O
,
óóO P
Author
óóQ W
=
óóX Y
updatedAuthor
óóZ g
}
óóh i
)
óói j
;
óój k
}
òò 
catch
ôô 
(
ôô 
	Exception
ôô 
ex
ôô 
)
ôô  
{
öö 
return
õõ 
NotFound
õõ 
(
õõ  
new
õõ  #
{
õõ$ %
Message
õõ& -
=
õõ. /
ex
õõ0 2
.
õõ2 3
Message
õõ3 :
}
õõ; <
)
õõ< =
;
õõ= >
}
úú 
}
ùù 	
}
üü 
}°° 