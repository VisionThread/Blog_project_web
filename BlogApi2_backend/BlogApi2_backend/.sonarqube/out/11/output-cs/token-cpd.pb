á
nC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\WeatherForecast.cs
	namespace 	
BlogApi2_backend
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateOnly 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ç
~C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Services\IServices\IBlogService.cs
	namespace 	
BlogApi2_backend
 
. 
Services #
.# $
	IServices$ -
{ 
public

 

	interface

 
IBlogReadService

 %
{ 
Task 
< 
IEnumerable 
< 
Blog 
> 
> 
GetBlogs  (
(( )
)) *
;* +
Task 
< 
Blog 
? 
> 
GetBlogById 
(  
int  #
id$ &
)& '
;' (
Task 
< 
IEnumerable 
< 
GetBlogTitleDto (
>( )
>) *
GetBlogByTitle+ 9
(9 :
string: @
titleA F
)F G
;G H
} 
public 

	interface 
IBlogWriteService &
{ 
Task 
< 
Blog 
> 

CreateBlog 
( 

AddBlogDto (
addBlog) 0
)0 1
;1 2
Task 
< 
bool 
> 

UpdateBlog 
( 
int !
id" $
,$ %
UpdateBlogDto& 3

updateBlog4 >
)> ?
;? @
} 
public 

	interface 
IBlogDeleteService '
{ 
Task 
< 
bool 
> 
DeleteBlogById !
(! "
int" %
id& (
)( )
;) *
Task 
< 
bool 
> 
DeleteAllBlogs !
(! "
)" #
;# $
} 
} €
ÄC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Services\IServices\IAuthorService.cs
	namespace 	
BlogApi2_backend
 
. 
Services #
.# $
	IServices$ -
{ 
public 

	interface 
IAuthorService #
{ 
Task 
< 
IEnumerable 
< 
Author 
>  
>  !
GetAllAuthors" /
(/ 0
)0 1
;1 2
Task

 
<

 
GetAuthorDto

 
?

 
>

 
GetAuthorById

 )
(

) *
int

* -
id

. 0
)

0 1
;

1 2
Task 
< 
IEnumerable 
< 
GetAuthorDto %
?% &
>& '
>' (
GetAuthorByName) 8
(8 9
string9 ?
name@ D
)D E
;E F
} 
public 

	interface 
IAuthorWriteService (
{ 
Task 
< 
Author 
> 
RegisterAuthor #
(# $
	AddAuthor$ -
	addAuthor. 7
)7 8
;8 9
Task 
< 
Author 
> 
LoginAuthor  
(  !
LoginDto! )
loginDto* 2
)2 3
;3 4
Task 
< 
Author 
> 
UpdateDetailAuthor '
(' (
int( +
id, .
,. /
UpdateAuthorDto0 ?
updateAuthorDto@ O
)O P
;P Q
} 
} ∆2
sC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Services\BlogService.cs
	namespace 	
BlogApi2_backend
 
. 
Services #
{ 
public		 

class		 
BlogService		 
:		 
IBlogReadService		 /
,		/ 0
IBlogWriteService		1 B
,		B C
IBlogDeleteService		D V
{

 
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IBlogRepository (
_blogRepository) 8
;8 9
public 
BlogService 
( 
IMapper "
mapper# )
,) *
IBlogRepository+ :
blogRepository; I
)I J
{ 	
_mapper 
= 
mapper 
; 
_blogRepository 
= 
blogRepository ,
;, -
} 	
public 
async 
Task 
< 
Blog 
? 
>  
GetBlogById! ,
(, -
int- 0
id1 3
)3 4
{ 	
var 
blog 
= 
await 
_blogRepository ,
., -
GetBlogById- 8
(8 9
id9 ;
); <
;< =
if 
( 
blog 
== 
null 
) 
{ 
throw 
new 
ArgumentException +
(+ ,
$str, <
)< =
;= >
} 
return 
await 
_blogRepository (
.( )
GetBlogById) 4
(4 5
id5 7
)7 8
;8 9
} 	
public!! 
async!! 
Task!! 
<!! 
IEnumerable!! %
<!!% &
GetBlogTitleDto!!& 5
>!!5 6
>!!6 7
GetBlogByTitle!!8 F
(!!F G
string!!G M
title!!N S
)!!S T
{"" 	
var## 
blogs## 
=## 
await## 
_blogRepository## -
.##- .
GetBlogsByTitle##. =
(##= >
title##> C
)##C D
;##D E
var%% 

final_blog%% 
=%% 
_mapper%% $
.%%$ %
Map%%% (
<%%( )
List%%) -
<%%- .
GetBlogTitleDto%%. =
>%%= >
>%%> ?
(%%? @
blogs%%@ E
)%%E F
;%%F G
return&& 

final_blog&& 
;&& 
}'' 	
public)) 
async)) 
Task)) 
<)) 
IEnumerable)) %
<))% &
Blog))& *
>))* +
>))+ ,
GetBlogs))- 5
())5 6
)))6 7
{** 	
var++ 
blogs++ 
=++ 
await++ 
_blogRepository++ -
.++- .
GetBlogs++. 6
(++6 7
)++7 8
;++8 9
return-- 
blogs-- 
;-- 
}.. 	
public33 
async33 
Task33 
<33 
Blog33 
>33 

CreateBlog33  *
(33* +

AddBlogDto33+ 5
addBlog336 =
)33= >
{44 	
var55 

blogEntity55 
=55 
_mapper55 $
.55$ %
Map55% (
<55( )
Blog55) -
>55- .
(55. /
addBlog55/ 6
)556 7
;557 8

blogEntity66 
.66 
	CreatedAt66  
=66! "
DateTime66# +
.66+ ,
Now66, /
;66/ 0
await88 
_blogRepository88 !
.88! "

CreateBlog88" ,
(88, -

blogEntity88- 7
)887 8
;888 9
return:: 

blogEntity:: 
;:: 
}<< 	
public?? 
async?? 
Task?? 
<?? 
bool?? 
>?? 

UpdateBlog??  *
(??* +
int??+ .
id??/ 1
,??1 2
UpdateBlogDto??3 @

updateBlog??A K
)??K L
{@@ 	
varBB 
blogToUpdateBB 
=BB 
awaitBB $
_blogRepositoryBB% 4
.BB4 5
GetBlogByIdBB5 @
(BB@ A
idBBA C
)BBC D
;BBD E
ifDD 
(DD 
blogToUpdateDD 
==DD 
nullDD  $
)DD$ %
{EE 
returnFF 
falseFF 
;FF 
}GG 
blogToUpdateII 
.II 
TitleII 
=II  

updateBlogII! +
.II+ ,
TitleII, 1
;II1 2
blogToUpdateKK 
.KK 
ContentKK  
=KK! "

updateBlogKK# -
.KK- .
ContentKK. 5
;KK5 6
awaitMM 
_blogRepositoryMM !
.MM! "

UpdateBlogMM" ,
(MM, -
blogToUpdateMM- 9
)MM9 :
;MM: ;
returnNN 
trueNN 
;NN 
}OO 	
publicUU 
asyncUU 
TaskUU 
<UU 
boolUU 
>UU 
DeleteBlogByIdUU  .
(UU. /
intUU/ 2
idUU3 5
)UU5 6
{VV 	
varXX 
blogToDeleteXX 
=XX 
awaitXX $
_blogRepositoryXX% 4
.XX4 5
GetBlogByIdXX5 @
(XX@ A
idXXA C
)XXC D
;XXD E
ifZZ 
(ZZ 
blogToDeleteZZ 
==ZZ 
nullZZ  $
)ZZ$ %
{[[ 
return\\ 
false\\ 
;\\ 
}]] 
await__ 
_blogRepository__ !
.__! "

DeleteBlog__" ,
(__, -
blogToDelete__- 9
)__9 :
;__: ;
return`` 
true`` 
;`` 
}bb 	
publicdd 
asyncdd 
Taskdd 
<dd 
booldd 
>dd 
DeleteAllBlogsdd  .
(dd. /
)dd/ 0
{ee 	
awaitff 
_blogRepositoryff !
.ff! "
DeleteAllBlogsff" 0
(ff0 1
)ff1 2
;ff2 3
returngg 
truegg 
;gg 
}hh 	
}ii 
}jj ô5
uC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Services\AuthorService.cs
	namespace 	
BlogApi2_backend
 
. 
Services #
{		 
public

 

class

 
AuthorService

 
:

  
IAuthorService

! /
,

/ 0
IAuthorWriteService

1 D
{ 
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IAuthorRepository *
_authorRepository+ <
;< =
public 
AuthorService 
( 
BlogContext (
	dbcontext) 2
,2 3
IMapper4 ;
mapper< B
,B C
IAuthorRepositoryD U
authorRepositoryV f
)f g
{ 	
_mapper 
= 
mapper 
; 
_authorRepository 
= 
authorRepository  0
;0 1
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Author& ,
>, -
>- .
GetAllAuthors/ <
(< =
)= >
{ 	
return 
await 
_authorRepository *
.* +
GetAllAuthors+ 8
(8 9
)9 :
;: ;
} 	
public 
async 
Task 
< 
GetAuthorDto &
?& '
>' (
GetAuthorById) 6
(6 7
int7 :
id; =
)= >
{ 	
var 
author 
= 
await 
_authorRepository 0
.0 1
GetAuthorById1 >
(> ?
id? A
)A B
;B C
return 
_mapper 
. 
Map 
< 
GetAuthorDto +
>+ ,
(, -
author- 3
)3 4
;4 5
} 	
public!! 
async!! 
Task!! 
<!! 
IEnumerable!! %
<!!% &
GetAuthorDto!!& 2
?!!2 3
>!!3 4
>!!4 5
GetAuthorByName!!6 E
(!!E F
string!!F L
name!!M Q
)!!Q R
{"" 	
var## 
author## 
=## 
await## 
_authorRepository## 0
.##0 1
GetAuthorByName##1 @
(##@ A
name##A E
)##E F
;##F G
return$$ 
_mapper$$ 
.$$ 
Map$$ 
<$$ 
IEnumerable$$  +
<$$+ ,
GetAuthorDto$$, 8
>$$8 9
>$$9 :
($$: ;
author$$; A
)$$A B
;$$B C
}'' 	
public,, 
async,, 
Task,, 
<,, 
Author,,  
>,,  !
LoginAuthor,," -
(,,- .
LoginDto,,. 6
loginDto,,7 ?
),,? @
{-- 	
var.. 
author.. 
=.. 
await.. 
_authorRepository.. 0
...0 1
LoginAuthor..1 <
(..< =
loginDto..= E
...E F
Email..F K
,..K L
loginDto..M U
...U V
Password..V ^
)..^ _
;.._ `
if// 
(// 
author// 
==// 
null// 
)// 
{00 
throw11 
new11 
ArgumentException11 +
(11+ ,
$str11, G
)11G H
;11H I
}22 
return33 
author33 
;33 
}44 	
public66 
async66 
Task66 
<66 
Author66  
>66  !
RegisterAuthor66" 0
(660 1
	AddAuthor661 :
	addAuthor66; D
)66D E
{77 	
var88 
existingAuthor88 
=88  
await88! &
_authorRepository88' 8
.888 9
GetAuthorByName889 H
(88H I
	addAuthor88I R
.88R S
Email88S X
)88X Y
;88Y Z
if99 
(99 
existingAuthor99 
!=99 !
null99" &
)99& '
{:: 
throw;; 
new;; 
ArgumentException;; +
(;;+ ,
$str;;, J
);;J K
;;;K L
}<< 
var>> 
authorEntity>> 
=>> 
_mapper>> &
.>>& '
Map>>' *
<>>* +
Author>>+ 1
>>>1 2
(>>2 3
	addAuthor>>3 <
)>>< =
;>>= >
await?? 
_authorRepository?? #
.??# $
	AddAuthor??$ -
(??- .
authorEntity??. :
)??: ;
;??; <
return@@ 
authorEntity@@ 
;@@  
}AA 	
publicCC 
asyncCC 
TaskCC 
<CC 
AuthorCC  
>CC  !
UpdateDetailAuthorCC" 4
(CC4 5
intCC5 8
idCC9 ;
,CC; <
UpdateAuthorDtoCC= L
updateAuthorDtoCCM \
)CC\ ]
{DD 	
varEE 
authorEE 
=EE 
awaitEE 
_authorRepositoryEE 0
.EE0 1
GetAuthorByIdEE1 >
(EE> ?
idEE? A
)EEA B
;EEB C
ifFF 
(FF 
authorFF 
==FF 
nullFF 
)FF 
{GG 
throwHH 
newHH  
KeyNotFoundExceptionHH .
(HH. /
$strHH/ A
)HHA B
;HHB C
}II 
authorJJ 
.JJ 
NameJJ 
=JJ 
updateAuthorDtoJJ )
.JJ) *
NameJJ* .
??JJ/ 1
authorJJ2 8
.JJ8 9
NameJJ9 =
;JJ= >
authorKK 
.KK 
EmailKK 
=KK 
updateAuthorDtoKK *
.KK* +
EmailKK+ 0
??KK1 3
authorKK4 :
.KK: ;
EmailKK; @
;KK@ A
ifLL 
(LL 
!LL 
stringLL 
.LL 
IsNullOrEmptyLL %
(LL% &
updateAuthorDtoLL& 5
.LL5 6
PasswordLL6 >
)LL> ?
)LL? @
{MM 
authorNN 
.NN 
PasswordNN 
=NN  !
updateAuthorDtoNN" 1
.NN1 2
PasswordNN2 :
;NN: ;
}OO 
awaitPP 
_authorRepositoryPP #
.PP# $
UpdateAuthorPP$ 0
(PP0 1
authorPP1 7
)PP7 8
;PP8 9
returnQQ 
authorQQ 
;QQ 
}RR 	
}SS 
}TT ˇ

yC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Repository\IBlogRepository.cs
	namespace 	
BlogApi2_backend
 
. 

Repository %
{ 
public 

	interface 
IBlogRepository $
{ 
Task 
< 
Blog 
? 
> 
GetBlogById 
(  
int  #
id$ &
)& '
;' (
Task 
< 
IEnumerable 
< 
Blog 
> 
> 
GetBlogs  (
(( )
)) *
;* +
Task		 
<		 
IEnumerable		 
<		 
Blog		 
>		 
>		 
GetBlogsByTitle		  /
(		/ 0
string		0 6
title		7 <
)		< =
;		= >
Task

 

CreateBlog

 
(

 
Blog

 
blog

 !
)

! "
;

" #
Task 

UpdateBlog 
( 
Blog 
blog !
)! "
;" #
Task 

DeleteBlog 
( 
Blog 
blog !
)! "
;" #
Task 
DeleteAllBlogs 
( 
) 
; 
} 
} ª
{C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Repository\IAuthorRepository.cs
	namespace 	
BlogApi2_backend
 
. 

Repository %
{ 
public 

	interface 
IAuthorRepository &
{ 
Task 
< 
IEnumerable 
< 
Author 
>  
>  !
GetAllAuthors" /
(/ 0
)0 1
;1 2
Task 
< 
Author 
? 
> 
GetAuthorById #
(# $
int$ '
id( *
)* +
;+ ,
Task		 
<		 
IEnumerable		 
<		 
Author		 
>		  
>		  !
GetAuthorByName		" 1
(		1 2
string		2 8
name		9 =
)		= >
;		> ?
Task

 
	AddAuthor

 
(

 
Author

 
author

 $
)

$ %
;

% &
Task 
UpdateAuthor 
( 
Author  
author! '
)' (
;( )
Task 
< 
Author 
? 
> 
LoginAuthor !
(! "
string" (
email) .
,. /
string0 6
password7 ?
)? @
;@ A
} 
} °'
xC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Repository\BlogRepository.cs
	namespace 	
BlogApi2_backend
 
. 

Repository %
{ 
public 

class 
BlogRepository 
:  !
IBlogRepository" 1
{ 
private		 
readonly		 
BlogContext		 $

_dbcontext		% /
;		/ 0
public 
BlogRepository 
( 
BlogContext )
	dbContext* 3
)3 4
{ 	

_dbcontext 
= 
	dbContext "
;" #
} 	
public 
async 
Task 

CreateBlog $
($ %
Blog% )
blog* .
). /
{ 	
await 

_dbcontext 
. 
Blogs "
." #
AddAsync# +
(+ ,
blog, 0
)0 1
;1 2
await 

_dbcontext 
. 
SaveChangesAsync -
(- .
). /
;/ 0
} 	
public 
async 
Task 
DeleteAllBlogs (
(( )
)) *
{ 	
var 
blogs 
= 
await 

_dbcontext (
.( )
Blogs) .
.. /
ToListAsync/ :
(: ;
); <
;< =

_dbcontext 
. 
Blogs 
. 
RemoveRange (
(( )
blogs) .
). /
;/ 0
await 

_dbcontext 
. 
SaveChangesAsync -
(- .
). /
;/ 0
} 	
public 
async 
Task 

DeleteBlog $
($ %
Blog% )
blog* .
). /
{ 	

_dbcontext 
. 
Blogs 
. 
Remove #
(# $
blog$ (
)( )
;) *
await 

_dbcontext 
. 
SaveChangesAsync -
(- .
). /
;/ 0
}   	
public"" 
async"" 
Task"" 
<"" 
Blog"" 
?"" 
>""  
GetBlogById""! ,
("", -
int""- 0
id""1 3
)""3 4
{## 	
var$$ 
blog$$ 
=$$ 
await$$ 

_dbcontext$$ '
.$$' (
Blogs$$( -
.$$- .
Where$$. 3
($$3 4
b$$4 5
=>$$6 8
b$$9 :
.$$: ;
Id$$; =
==$$> @
id$$A C
)$$C D
.$$D E
Include$$E L
($$L M
b$$M N
=>$$O Q
b$$R S
.$$S T
Author$$T Z
)$$Z [
.%% 
FirstOrDefaultAsync%% '
(%%' (
)%%( )
;%%) *
return'' 
blog'' 
;'' 
}(( 	
public** 
async** 
Task** 
<** 
IEnumerable** %
<**% &
Blog**& *
>*** +
>**+ ,
GetBlogs**- 5
(**5 6
)**6 7
{++ 	
return,, 
await,, 

_dbcontext,, #
.,,# $
Blogs,,$ )
.,,) *
ToListAsync,,* 5
(,,5 6
),,6 7
;,,7 8
}-- 	
public// 
async// 
Task// 
<// 
IEnumerable// %
<//% &
Blog//& *
>//* +
>//+ ,
GetBlogsByTitle//- <
(//< =
string//= C
title//D I
)//I J
{00 	
return11 
await11 

_dbcontext11 #
.11# $
Blogs11$ )
.22 
Where22 
(22 
b22 
=>22 
b22  
.22  !
Title22! &
.22& '
ToLower22' .
(22. /
)22/ 0
.220 1
Contains221 9
(229 :
title22: ?
.22? @
ToLower22@ G
(22G H
)22H I
)22I J
)22J K
.33 
Include33 
(33 
b33 
=>33  
b33! "
.33" #
Author33# )
)33) *
.44 
ToListAsync44 
(44  
)44  !
;44! "
}55 	
public77 
async77 
Task77 

UpdateBlog77 $
(77$ %
Blog77% )
blog77* .
)77. /
{88 	

_dbcontext99 
.99 
Blogs99 
.99 
Update99 #
(99# $
blog99$ (
)99( )
;99) *
await:: 

_dbcontext:: 
.:: 
SaveChangesAsync:: -
(::- .
)::. /
;::/ 0
};; 	
}<< 
}== ˚#
zC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Repository\AuthorRepository.cs
	namespace 	
BlogApi2_backend
 
. 

Repository %
{ 
public		 

class		 
AuthorRepository		 !
:		" #
IAuthorRepository		$ 5
{

 
private 
readonly 
BlogContext $

_dbcontext% /
;/ 0
public 
AuthorRepository 
(  
BlogContext  +
	dbcontext, 5
)5 6
{ 	

_dbcontext 
= 
	dbcontext "
;" #
} 	
public 
async 
Task 
	AddAuthor #
(# $
Author$ *
author+ 1
)1 2
{ 	
await 

_dbcontext 
. 
Authors $
.$ %
AddAsync% -
(- .
author. 4
)4 5
;5 6
await 

_dbcontext 
. 
SaveChangesAsync -
(- .
). /
;/ 0
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Author& ,
>, -
>- .
GetAllAuthors/ <
(< =
)= >
{ 	
var 
authors 
= 
await 

_dbcontext  *
.* +
Authors+ 2
.2 3
ToListAsync3 >
(> ?
)? @
;@ A
return 
authors 
; 
} 	
public 
async 
Task 
< 
Author  
?  !
>! "
GetAuthorById# 0
(0 1
int1 4
id5 7
)7 8
{ 	
return 
await 

_dbcontext #
.# $
Authors$ +
.+ ,
Include, 3
(3 4
a4 5
=>6 8
a9 :
.: ;
Blogs; @
)@ A
.   
FirstOrDefaultAsync   $
(  $ %
a  % &
=>  ' )
a  * +
.  + ,
Id  , .
==  / 1
id  2 4
)  4 5
;  5 6
}!! 	
public## 
async## 
Task## 
<## 
IEnumerable## %
<##% &
Author##& ,
>##, -
>##- .
GetAuthorByName##/ >
(##> ?
string##? E
name##F J
)##J K
{$$ 	
return%% 
await%% 

_dbcontext%% #
.%%# $
Authors%%$ +
.&& 
Include&& 
(&& 
a&& 
=>&& 
a&& 
.&&  
Blogs&&  %
)&&% &
.'' 
Where'' 
('' 
a'' 
=>'' 
a'' 
.'' 
Name'' "
.''" #
ToLower''# *
(''* +
)''+ ,
.'', -
Contains''- 5
(''5 6
name''6 :
.'': ;
ToLower''; B
(''B C
)''C D
)''D E
)''E F
.(( 
ToListAsync(( 
((( 
)(( 
;(( 
})) 	
public++ 
async++ 
Task++ 
<++ 
Author++  
?++  !
>++! "
LoginAuthor++# .
(++. /
string++/ 5
email++6 ;
,++; <
string++= C
password++D L
)++L M
{,, 	
return-- 
await-- 

_dbcontext-- #
.--# $
Authors--$ +
... 
FirstOrDefaultAsync.. (
(..( )
a..) *
=>..+ -
a... /
.../ 0
Email..0 5
==..6 8
email..9 >
&&..? A
a..B C
...C D
Password..D L
==..M O
password..P X
)..X Y
;..Y Z
}00 	
public22 
async22 
Task22 
UpdateAuthor22 &
(22& '
Author22' -
author22. 4
)224 5
{33 	

_dbcontext44 
.44 
Authors44 
.44 
Update44 %
(44% &
author44& ,
)44, -
;44- .
await55 

_dbcontext55 
.55 
SaveChangesAsync55 -
(55- .
)55. /
;55/ 0
}66 	
}77 
}88 ß-
fC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. 

AddOpenApi 
( 
) 
; 
builder 
. 
Services 
. 
AddDbContext 
< 
BlogContext )
>) *
(* +
options+ 2
=>3 5
options 
. 
	UseSqlite 
( 
builder 
. 
Configuration +
.+ ,
GetConnectionString, ?
(? @
$str@ S
)S T
)T U
)U V
;V W
builder 
. 
Services 
. 
	AddScoped 
< 
IBlogRepository *
,* +
BlogRepository, :
>: ;
(; <
)< =
;= >
builder 
. 
Services 
. 
	AddScoped 
< 
IBlogReadService +
,+ ,
BlogService- 8
>8 9
(9 :
): ;
;; <
builder 
. 
Services 
. 
	AddScoped 
< 
IBlogWriteService ,
,, -
BlogService. 9
>9 :
(: ;
); <
;< =
builder 
. 
Services 
. 
	AddScoped 
< 
IBlogDeleteService -
,- .
BlogService/ :
>: ;
(; <
)< =
;= >
builder 
. 
Services 
. 
	AddScoped 
< 
IAuthorRepository ,
,, -
AuthorRepository. >
>> ?
(? @
)@ A
;A B
builder 
. 
Services 
. 
	AddScoped 
< 
IAuthorService )
,) *
AuthorService+ 8
>8 9
(9 :
): ;
;; <
builder 
. 
Services 
. 
	AddScoped 
< 
IAuthorWriteService .
,. /
AuthorService0 =
>= >
(> ?
)? @
;@ A
builder   
.   
Services   
.   
AddCors   
(   
options    
=>  ! #
{!! 
options"" 
."" 
	AddPolicy"" 
("" 
$str"" +
,""+ ,
policy""- 3
=>""4 6
{## 
policy$$ 
.$$ 
WithOrigins$$ 
($$ 
$str$$ 2
)$$2 3
.%% 
AllowAnyHeader%% 
(%% 
)%% 
.&& 
AllowAnyMethod&& 
(&& 
)&& 
;&&  
}'' 
)'' 
;'' 
}(( 
)(( 
;(( 
builder** 
.** 
Services** 
.** %
AddDistributedMemoryCache** *
(*** +
)**+ ,
;**, -
builder++ 
.++ 
Services++ 
.++ 

AddSession++ 
(++ 
options++ #
=>++$ &
{,, 
options-- 
.-- 
IdleTimeout-- 
=-- 
TimeSpan-- "
.--" #
FromMinutes--# .
(--. /
$num--/ 1
)--1 2
;--2 3
options.. 
... 
Cookie.. 
... 
HttpOnly.. 
=.. 
true.. "
;.." #
options// 
.// 
Cookie// 
.// 
IsEssential// 
=//  
true//! %
;//% &
}00 
)00 
;00 
IServiceCollection22 
serviceCollection22 $
=22% &
builder22' .
.22. /
Services22/ 7
.227 8
AddAutoMapper228 E
(22E F
typeof22F L
(22L M
AutoMapperConfig22M ]
)22] ^
)22^ _
;22_ `
var66 
app66 
=66 	
builder66
 
.66 
Build66 
(66 
)66 
;66 
if99 
(99 
app99 
.99 
Environment99 
.99 
IsDevelopment99 !
(99! "
)99" #
)99# $
{:: 
app;; 
.;; 

MapOpenApi;; 
(;; 
);; 
;;; 
}<< 
app?? 
.?? 
UseCors?? 
(?? 
$str?? !
)??! "
;??" #
app@@ 
.@@ 

UseSession@@ 
(@@ 
)@@ 
;@@ 
appBB 
.BB 
UseHttpsRedirectionBB 
(BB 
)BB 
;BB 
appDD 
.DD 
UseMiddlewareDD 
<DD %
GlobalExceptionMiddlewareDD +
>DD+ ,
(DD, -
)DD- .
;DD. /
appFF 
.FF 
UseAuthorizationFF 
(FF 
)FF 
;FF 
appHH 
.HH 
MapControllersHH 
(HH 
)HH 
;HH 
appJJ 
.JJ 
RunJJ 
(JJ 
)JJ 	
;JJ	 
Ä	
wC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Entities\Comments.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Entities" *
{ 
public 

class 
Comments 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
required 
string 
CommentText *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
public

 
int

 
BlogId

 
{

 
get

 
;

  
set

! $
;

$ %
}

& '
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ñ
sC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Entities\Blog.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Entities" *
{ 
public 

class 
Blog 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
public		 
int		 
AuthorId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public 
Author 
? 
Author 
{ 
get  #
;# $
set% (
;( )
}* +
public 
List 
< 
Comments 
> 
Comments &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
=5 6
new7 :
List; ?
<? @
Comments@ H
>H I
(I J
)J K
;K L
} 
} ‰
xC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\UpdateBlogDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
UpdateBlogDto 
{ 
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
} 
}		 ›

uC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Entities\Author.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Entities" *
{ 
public 

class 
Author 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
required 
string 
Name #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public		 
required		 
string		 
Email		 $
{		% &
get		' *
;		* +
set		, /
;		/ 0
}		1 2
public 
required 
string 
Password '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
List 
< 
Blog 
> 
Blogs 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
new0 3
List4 8
<8 9
Blog9 =
>= >
(> ?
)? @
;@ A
} 
} ˛
zC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\UpdateAuthorDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
UpdateAuthorDto  
{ 
public 
required 
string 
Name #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
required 
string 
Email $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Password '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
}		 
}

 ¬
sC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\LoginDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
LoginDto 
{ 
public 
required 
string 
Email $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Password '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
}		 µ	
zC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\GetBlogTitleDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
GetBlogTitleDto  
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
public		 
required		 
string		 

AuthorName		 )
{		* +
get		, /
;		/ 0
set		1 4
;		4 5
}		6 7
}

 
} ÷
uC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\AddComment.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 

AddComment 
{ 
public 
required 
string 
CommentText *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
DateTime2 :
.: ;
UtcNow; A
;A B
public 
required 
int 
BlogId "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
} 
} è
wC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\GetAuthorDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
GetAuthorDto 
{ 
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
public 
required 
string 

AuthorName )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
List 
< 
BlogDto 
> 
? 
Blogs #
{$ %
get& )
;) *
set+ .
;. /
}0 1
}		 
}

 ı
rC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\BlogDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
BlogDto 
{ 
public 
int 
BlogId 
{ 
get 
;  
set! $
;$ %
}& '
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
}		 
}

 ˝
uC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\AddBlogDto.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 

AddBlogDto 
{ 
public 
required 
string 
Title $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Content &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public		 
DateTime		 
	CreatedAt		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public

 
int

 
AuthorId

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
} 
} Ú
tC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Models\Dtos\AddAuthor.cs
	namespace 	
BlogApi2_backend
 
. 
Models !
.! "
Dtos" &
{ 
public 

class 
	AddAuthor 
{ 
public 
required 
string 
Name #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
required 
string 
Email $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
required 
string 
Password '
{( )
get+ .
;. /
set0 3
;3 4
}5 6
}		 
}

 ¨
àC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250425074002_ExceptionHandle.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class 
ExceptionHandle (
:) *
	Migration+ 4
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ¢
ÉC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250408084008_NewChanges.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class 

NewChanges #
:$ %
	Migration& /
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ®
ÜC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250227113427_InitialCreate.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class 
InitialCreate &
:' (
	Migration) 2
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ∫
êC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250205072744_Blog navigation removed.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class !
Blognavigationremoved .
:/ 0
	Migration1 :
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ä
êC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250204111754_In comment-author added.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class  
Incommentauthoradded -
:. /
	Migration0 9
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
int' *
>* +
(+ ,
name 
: 
$str  
,  !
table 
: 
$str !
,! "
type 
: 
$str 
,  
nullable 
: 
false 
,  
defaultValue 
: 
$num 
)  
;  !
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str  
,  !
table 
: 
$str !
)! "
;" #
} 	
} 
} Ü
ÜC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250204111029_Commentupdatd.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class 
Commentupdatd &
:' (
	Migration) 2
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
RenameColumn )
() *
name 
: 
$str 
,  
table 
: 
$str !
,! "
newName 
: 
$str &
)& '
;' (
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
RenameColumn )
() *
name 
: 
$str #
,# $
table 
: 
$str !
,! "
newName 
: 
$str "
)" #
;# $
} 	
} 
} Ÿ
éC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250204110202_Comment section added.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public		 

partial		 
class		 
Commentsectionadded		 ,
:		- .
	Migration		/ 8
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
Content 
= 
table #
.# $
Column$ *
<* +
string+ 1
>1 2
(2 3
type3 7
:7 8
$str9 ?
,? @
nullableA I
:I J
falseK P
)P Q
,Q R
	CreatedAt 
= 
table  %
.% &
Column& ,
<, -
DateTime- 5
>5 6
(6 7
type7 ;
:; <
$str= C
,C D
nullableE M
:M N
falseO T
)T U
,U V
BlogId 
= 
table "
." #
Column# )
<) *
int* -
>- .
(. /
type/ 3
:3 4
$str5 >
,> ?
nullable@ H
:H I
falseJ O
)O P
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 2
,2 3
x4 5
=>6 8
x9 :
.: ;
Id; =
)= >
;> ?
table 
. 

ForeignKey $
($ %
name 
: 
$str 8
,8 9
column 
: 
x  !
=>" $
x% &
.& '
BlogId' -
,- .
principalTable &
:& '
$str( /
,/ 0
principalColumn '
:' (
$str) -
,- .
onDelete    
:    !
ReferentialAction  " 3
.  3 4
Cascade  4 ;
)  ; <
;  < =
}!! 
)!! 
;!! 
migrationBuilder## 
.## 
CreateIndex## (
(##( )
name$$ 
:$$ 
$str$$ *
,$$* +
table%% 
:%% 
$str%% !
,%%! "
column&& 
:&& 
$str&&  
)&&  !
;&&! "
}'' 	
	protected** 
override** 
void** 
Down**  $
(**$ %
MigrationBuilder**% 5
migrationBuilder**6 F
)**F G
{++ 	
migrationBuilder,, 
.,, 
	DropTable,, &
(,,& '
name-- 
:-- 
$str--  
)--  !
;--! "
}.. 	
}// 
}00 Ú
ÅC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250131105642_Initial4.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public 

partial 
class 
Initial4 !
:" #
	Migration$ -
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str  
,  !
table 
: 
$str  
,  !
type 
: 
$str 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str  
,  !
table 
: 
$str  
)  !
;! "
} 	
} 
} ë.
ÜC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Migrations\20250131092651_Intialcreate1.cs
	namespace 	
BlogApi2_backend
 
. 

Migrations %
{ 
public		 

partial		 
class		 
Intialcreate1		 &
:		' (
	Migration		) 2
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
,  
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 <
,< =
nullable> F
:F G
falseH M
)M N
,N O
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 =
,= >
nullable? G
:G H
falseI N
)N O
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 1
,1 2
x3 4
=>5 7
x8 9
.9 :
Id: <
)< =
;= >
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id   
=   
table   
.   
Column   %
<  % &
int  & )
>  ) *
(  * +
type  + /
:  / 0
$str  1 :
,  : ;
nullable  < D
:  D E
false  F K
)  K L
.!! 

Annotation!! #
(!!# $
$str!!$ :
,!!: ;
true!!< @
)!!@ A
,!!A B
Title"" 
="" 
table"" !
.""! "
Column""" (
<""( )
string"") /
>""/ 0
(""0 1
type""1 5
:""5 6
$str""7 =
,""= >
nullable""? G
:""G H
false""I N
)""N O
,""O P
Content## 
=## 
table## #
.### $
Column##$ *
<##* +
string##+ 1
>##1 2
(##2 3
type##3 7
:##7 8
$str##9 ?
,##? @
nullable##A I
:##I J
false##K P
)##P Q
,##Q R
	CreatedAt$$ 
=$$ 
table$$  %
.$$% &
Column$$& ,
<$$, -
DateTime$$- 5
>$$5 6
($$6 7
type$$7 ;
:$$; <
$str$$= C
,$$C D
nullable$$E M
:$$M N
false$$O T
)$$T U
,$$U V
AuthorId%% 
=%% 
table%% $
.%%$ %
Column%%% +
<%%+ ,
int%%, /
>%%/ 0
(%%0 1
type%%1 5
:%%5 6
$str%%7 @
,%%@ A
nullable%%B J
:%%J K
false%%L Q
)%%Q R
}&& 
,&& 
constraints'' 
:'' 
table'' "
=>''# %
{(( 
table)) 
.)) 

PrimaryKey)) $
())$ %
$str))% /
,))/ 0
x))1 2
=>))3 5
x))6 7
.))7 8
Id))8 :
))): ;
;)); <
table** 
.** 

ForeignKey** $
(**$ %
name++ 
:++ 
$str++ 9
,++9 :
column,, 
:,, 
x,,  !
=>,," $
x,,% &
.,,& '
AuthorId,,' /
,,,/ 0
principalTable-- &
:--& '
$str--( 1
,--1 2
principalColumn.. '
:..' (
$str..) -
,..- .
onDelete//  
://  !
ReferentialAction//" 3
.//3 4
Cascade//4 ;
)//; <
;//< =
}00 
)00 
;00 
migrationBuilder22 
.22 
CreateIndex22 (
(22( )
name33 
:33 
$str33 )
,33) *
table44 
:44 
$str44 
,44 
column55 
:55 
$str55 "
)55" #
;55# $
}66 	
	protected99 
override99 
void99 
Down99  $
(99$ %
MigrationBuilder99% 5
migrationBuilder996 F
)99F G
{:: 	
migrationBuilder;; 
.;; 
	DropTable;; &
(;;& '
name<< 
:<< 
$str<< 
)<< 
;<< 
migrationBuilder>> 
.>> 
	DropTable>> &
(>>& '
name?? 
:?? 
$str?? 
)??  
;??  !
}@@ 	
}AA 
}BB ∏
ÉC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Exceptions\GlobalExceptionMiddleware.cs
	namespace 	
BlogApi2_backend
 
. 

Exceptions %
{ 
public 

class %
GlobalExceptionMiddleware *
{ 
private 
readonly 
RequestDelegate (
_next) .
;. /
private		 
readonly		 
ILogger		  
<		  !%
GlobalExceptionMiddleware		! :
>		: ;
_logger		< C
;		C D
public %
GlobalExceptionMiddleware (
(( )
RequestDelegate) 8
next9 =
,= >
ILogger? F
<F G%
GlobalExceptionMiddlewareG `
>` a
loggerb h
)h i
{ 	
_next 
= 
next 
; 
_logger 
= 
logger 
; 
} 	
public 
async 
Task 
InvokeAsync %
(% &
HttpContext& 1
context2 9
)9 :
{ 	
try 
{ 
await 
_next 
( 
context #
)# $
;$ %
} 
catch 
( 
	Exception 
ex 
)  
{ 
_logger 
. 
LogError  
(  !
ex! #
,# $
$str% G
)G H
;H I
await  
HandleExceptionAsync *
(* +
context+ 2
,2 3
ex4 6
)6 7
;7 8
} 
} 	
private 
Task  
HandleExceptionAsync )
() *
HttpContext* 5
context6 =
,= >
	Exception? H
exI K
)K L
{ 	
var   

statusCode   
=   
ex   
switch    &
{!! 
SqliteException"" 
_""  !
=>""" $
(""% &
int""& )
)"") *
HttpStatusCode""* 8
.""8 9
InternalServerError""9 L
,""L M
ArgumentException## !
_##" #
=>##$ &
(##' (
int##( +
)##+ ,
HttpStatusCode##, :
.##: ;

BadRequest##; E
,##E F%
InvalidOperationException$$ )
_$$* +
=>$$, .
($$/ 0
int$$0 3
)$$3 4
HttpStatusCode$$4 B
.$$B C

BadRequest$$C M
,$$M N
TimeoutException%%  
_%%! "
=>%%# %
(%%& '
int%%' *
)%%* +
HttpStatusCode%%+ 9
.%%9 :
RequestTimeout%%: H
,%%H I
_&& 
=>&& 
(&& 
int&& 
)&& 
HttpStatusCode&& (
.&&( )
InternalServerError&&) <
}'' 
;'' 
var(( 
response(( 
=(( 
new(( 
{)) 

StatusCode** 
=** 

statusCode** '
,**' (
Message++ 
=++ 
ex++ 
.++ 
Message++ $
}-- 
;-- 
context// 
.// 
Response// 
.// 
ContentType// (
=//) *
$str//+ =
;//= >
context00 
.00 
Response00 
.00 

StatusCode00 '
=00( )

statusCode00* 4
;004 5
return11 
context11 
.11 
Response11 #
.11# $
WriteAsJsonAsync11$ 4
(114 5
response115 =
)11= >
;11> ?
}22 	
}33 
}44 ·
oC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Data\BlogContext.cs
	namespace 	
BlogApi2_backend
 
. 
Data 
{ 
public 

class 
BlogContext 
: 
	DbContext (
{ 
public 
BlogContext 
( 
DbContextOptions +
options, 3
)3 4
:5 6
base7 ;
(; <
options< C
)C D
{		 	
}

 	
public 
DbSet 
< 
Blog 
> 
Blogs  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Author 
> 
Authors $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DbSet 
< 
Comments 
> 
Comments '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
Blog  $
>$ %
(% &
)& '
. 
HasOne 
( 
b 
=> 
b 
. 
Author %
)% &
. 
WithMany 
( 
a 
=> 
a  
.  !
Blogs! &
)& '
. 
HasForeignKey 
( 
b  
=>! #
b$ %
.% &
AuthorId& .
). /
;/ 0
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
} 	
} 
} ö
ÑC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Controllers\WeatherForecastController.cs
	namespace 	
BlogApi2_backend
 
. 
Controllers &
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private		 
static		 
readonly		 
string		  &
[		& '
]		' (
	Summaries		) 2
=		3 4
new		5 8
[		8 9
]		9 :
{

 	
$str 
, 
$str !
,! "
$str# +
,+ ,
$str- 3
,3 4
$str5 ;
,; <
$str= C
,C D
$strE L
,L M
$strN S
,S T
$strU a
,a b
$strc n
} 	
;	 

private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str ,
), -
]- .
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
return 

Enumerable 
. 
Range #
(# $
$num$ %
,% &
$num' (
)( )
.) *
Select* 0
(0 1
index1 6
=>7 9
new: =
WeatherForecast> M
{ 
Date 
= 
DateOnly 
.  
FromDateTime  ,
(, -
DateTime- 5
.5 6
Now6 9
.9 :
AddDays: A
(A B
indexB G
)G H
)H I
,I J
TemperatureC 
= 
Random %
.% &
Shared& ,
., -
Next- 1
(1 2
-2 3
$num3 5
,5 6
$num7 9
)9 :
,: ;
Summary 
= 
	Summaries #
[# $
Random$ *
.* +
Shared+ 1
.1 2
Next2 6
(6 7
	Summaries7 @
.@ A
LengthA G
)G H
]H I
} 
) 
. 
ToArray 
( 
) 
; 
} 	
}   
}!! ˜5
|C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Controllers\CommentController.cs
	namespace 	
BlogApi2_backend
 
. 
Controllers &
{		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
public 

class 
CommentController "
:# $
ControllerBase% 3
{ 
private 
readonly 
BlogContext $
	dbcontext% .
;. /
private 
readonly 
IMapper  
_mapper! (
;( )
public 
CommentController  
(  !
BlogContext! ,
	dbcontext- 6
,6 7
IMapper8 ?
mapper@ F
)F G
{ 	
this 
. 
	dbcontext 
= 
	dbcontext &
;& '
this 
. 
_mapper 
= 
mapper !
;! "
} 	
[ 	
HttpGet	 
( 
$str  
)  !
]! "
public 
async 
Task 
< 
IActionResult '
>' (
GetCommentsForBlog) ;
(; <
int< ?
blogId@ F
)F G
{ 	
var 
blog 
= 
await 
	dbcontext &
.& '
Blogs' ,
.  !
Where! &
(& '
b' (
=>) +
b, -
.- .
Id. 0
==1 3
blogId4 :
): ;
.  !
Select! '
(' (
b( )
=>* ,
new- 0
{    !
b!!$ %
.!!% &
Id!!& (
,!!( )
b""$ %
.""% &
Title""& +
,""+ ,
Comments##$ ,
=##- .
b##/ 0
.##0 1
Comments##1 9
.##9 :
Select##: @
(##@ A
c##A B
=>##C E
new##F I
{$$$ %
c%%( )
.%%) *
Id%%* ,
,%%, -
c&&( )
.&&) *
CommentText&&* 5
,&&5 6

AuthorName''( 2
=''3 4
	dbcontext''5 >
.''> ?
Authors''? F
.((, -
Where((- 2
(((2 3
a((3 4
=>((5 7
a((8 9
.((9 :
Id((: <
==((= ?
c((@ A
.((A B
AuthorId((B J
)((J K
.)), -
Select))- 3
())3 4
a))4 5
=>))6 8
a))9 :
.)): ;
Name)); ?
)))? @
.**, -
FirstOrDefault**- ;
(**; <
)**< =
,**= >
c++( )
.++) *
	CreatedAt++* 3
},,$ %
),,% &
.,,& '
ToList,,' -
(,,- .
),,. /
}--  !
)--! "
...  !
FirstOrDefaultAsync..! 4
(..4 5
)..5 6
;..6 7
if// 
(// 
blog// 
==// 
null// 
)// 
{00 
return11 
NotFound11 
(11  
)11  !
;11! "
}22 
return44 
Ok44 
(44 
blog44 
.44 
Comments44 #
)44# $
;44$ %
}55 	
[77 	
HttpPost77	 
]77 
public88 
async88 
Task88 
<88 
IActionResult88 '
>88' (

AddComment88) 3
(883 4
[884 5
FromBody885 =
]88= >

AddComment88? I
addCommentDto88J W
)88W X
{99 	
if:: 
(:: 
addCommentDto:: 
==::  
null::! %
)::% &
{;; 
return<< 

BadRequest<< !
(<<! "
$str<<" =
)<<= >
;<<> ?
}== 
var?? 
blog1?? 
=?? 
await?? 
	dbcontext?? '
.??' (
Blogs??( -
.??- .
	FindAsync??. 7
(??7 8
addCommentDto??8 E
.??E F
BlogId??F L
)??L M
;??M N
if@@ 
(@@ 
blog1@@ 
==@@ 
null@@ 
)@@ 
{AA 
returnBB 

BadRequestBB !
(BB! "
$strBB" L
)BBL M
;BBM N
}CC 
varGG 
authorGG 
=GG 
awaitGG 
	dbcontextGG (
.GG( )
AuthorsGG) 0
.GG0 1
	FindAsyncGG1 :
(GG: ;
addCommentDtoGG; H
.GGH I
AuthorIdGGI Q
)GGQ R
;GGR S
ifHH 
(HH 
authorHH 
==HH 
nullHH 
)HH 
returnII 

BadRequestII !
(II! "
$strII" P
)IIP Q
;IIQ R
varKK 
commentKK 
=KK 
_mapperKK !
.KK! "
MapKK" %
<KK% &
CommentsKK& .
>KK. /
(KK/ 0
addCommentDtoKK0 =
)KK= >
;KK> ?
	dbcontextOO 
.OO 
CommentsOO 
.OO 
AddOO "
(OO" #
commentOO# *
)OO* +
;OO+ ,
awaitPP 
	dbcontextPP 
.PP 
SaveChangesAsyncPP ,
(PP, -
)PP- .
;PP. /
returnSS 
CreatedAtActionSS "
(SS" #
nameofSS# )
(SS) *
GetCommentByIdSS* 8
)SS8 9
,SS9 :
newSS; >
{SS? @
idSSA C
=SSD E
commentSSF M
.SSM N
IdSSN P
}SSQ R
,SSR S
commentSST [
)SS[ \
;SS\ ]
}TT 	
[VV 	
HttpGetVV	 
(VV 
$strVV 
)VV 
]VV 
publicWW 
asyncWW 
TaskWW 
<WW 
ActionResultWW &
<WW& '
CommentsWW' /
>WW/ 0
>WW0 1
GetCommentByIdWW2 @
(WW@ A
intWWA D
idWWE G
)WWG H
{XX 	
varYY 
commentYY 
=YY 
awaitYY 
	dbcontextYY  )
.YY) *
CommentsYY* 2
.YY2 3
	FindAsyncYY3 <
(YY< =
idYY= ?
)YY? @
;YY@ A
ifZZ 
(ZZ 
commentZZ 
==ZZ 
nullZZ 
)ZZ  
{[[ 
return\\ 
NotFound\\ 
(\\  
)\\  !
;\\! "
}]] 
return^^ 
comment^^ 
;^^ 
}__ 	
}bb 
}cc Ö=
yC:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Controllers\BlogController.cs
	namespace 	
BlogApi2_backend
 
. 
Controllers &
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public 

class 
BlogController 
:  !
ControllerBase" 0
{ 
private 
readonly 
IBlogReadService )
_blogReadService* :
;: ;
private 
readonly 
IBlogWriteService *
_blogWriteService+ <
;< =
private 
readonly 
IBlogDeleteService +
_blogDeleteService, >
;> ?
public 
BlogController 
( 
IBlogReadService .
blogReadService/ >
,> ?
IBlogWriteService@ Q
blogWriteServiceR b
,b c
IBlogDeleteServiced v
blogDeleteService	w à
)
à â
{ 	
_blogReadService 
= 
blogReadService .
;. /
_blogWriteService 
= 
blogWriteService  0
;0 1
_blogDeleteService 
=  
blogDeleteService! 2
;2 3
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetBlogs) 1
(1 2
)2 3
{ 	
var   
blogs   
=   
await   
_blogReadService   .
.  . /
GetBlogs  / 7
(  7 8
)  8 9
;  9 :
return"" 
Ok"" 
("" 
blogs"" 
)"" 
;"" 
}## 	
[&& 	
HttpGet&&	 
(&& 
$str&& 
)&& 
]&& 
public'' 
async'' 
Task'' 
<'' 
IActionResult'' '
>''' (
GetBlogByTitle'') 7
(''7 8
[''8 9
	FromQuery''9 B
]''B C
string''D J
title''K P
)''P Q
{(( 	
var)) 
blogs)) 
=)) 
await)) 
_blogReadService)) .
.)). /
GetBlogByTitle))/ =
())= >
title))> C
)))C D
;))D E
if** 
(** 
blogs** 
==** 
null** 
)** 
{++ 
return,, 
NotFound,, 
(,,  
new,,  #
{,,$ %
Message,,& -
=,,. /
$str,,0 @
},,A B
),,B C
;,,C D
}-- 
return// 
Ok// 
(// 
blogs// 
)// 
;// 
}00 	
[33 	
HttpGet33	 
(33 
$str33 
)33 
]33 
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (
GetBlogById44) 4
(444 5
int445 8
id449 ;
)44; <
{55 	
var77 
blog77 
=77 
await77 
_blogReadService77 -
.77- .
GetBlogById77. 9
(779 :
id77: <
)77< =
;77= >
if88 
(88 
blog88 
==88 
null88 
)88 
{99 
return:: 
NotFound:: 
(::  
new::  #
{::$ %
Message::& -
=::. /
$str::0 @
}::A B
)::B C
;::C D
};; 
return<< 
Ok<< 
(<< 
BlogResponseMapper<< (
.<<( )
MapToResponse<<) 6
(<<6 7
blog<<7 ;
)<<; <
)<<< =
;<<= >
}?? 	
[BB 	
HttpPostBB	 
]BB 
publicCC 
asyncCC 
TaskCC 
<CC 
IActionResultCC '
>CC' (

CreateBlogCC) 3
(CC3 4
[CC4 5
FromBodyCC5 =
]CC= >

AddBlogDtoCC? I
addBlogCCJ Q
)CCQ R
{DD 	
varFF 
blogFF 
=FF 
awaitFF 
_blogWriteServiceFF .
.FF. /

CreateBlogFF/ 9
(FF9 :
addBlogFF: A
)FFA B
;FFB C
returnGG 
OkGG 
(GG 
blogGG 
)GG 
;GG 
}II 	
[LL 	
HttpPutLL	 
(LL 
$strLL 
)LL 
]LL 
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (

UpdateBlogMM) 3
(MM3 4
intMM4 7
idMM8 :
,MM: ;
[MM< =
FromBodyMM= E
]MME F
UpdateBlogDtoMMG T

updateBlogMMU _
)MM_ `
{NN 	
varPP 
blogToUpdatePP 
=PP 
awaitPP $
_blogWriteServicePP% 6
.PP6 7

UpdateBlogPP7 A
(PPA B
idPPB D
,PPD E

updateBlogPPF P
)PPP Q
;PPQ R
ifQQ 
(QQ 
!QQ 
blogToUpdateQQ 
)QQ 
{RR 
returnSS 
NotFoundSS 
(SS  
newSS  #
{SS$ %
MessageSS& -
=SS. /
$strSS0 @
}SSA B
)SSB C
;SSC D
}TT 
returnVV 
OkVV 
(VV 
newVV 
{VV 
MessageVV #
=VV$ %
$strVV& A
,VVA B
BlogVVC G
=VVH I
blogToUpdateVVJ V
}VVW X
)VVX Y
;VVY Z
}ZZ 	
[]] 	

HttpDelete]]	 
(]] 
$str]] 
)]] 
]]] 
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (
DeleteBlogById^^) 7
(^^7 8
int^^8 ;
id^^< >
)^^> ?
{__ 	
varaa 
blogToDeleteaa 
=aa 
awaitaa $
_blogDeleteServiceaa% 7
.aa7 8
DeleteBlogByIdaa8 F
(aaF G
idaaG I
)aaI J
;aaJ K
ifcc 
(cc 
!cc 
blogToDeletecc 
)cc 
{dd 
returnee 
NotFoundee 
(ee  
newee  #
{ee$ %
Messageee& -
=ee. /
$stree0 @
}eeA B
)eeB C
;eeC D
}ff 
returngg 
Okgg 
(gg 
newgg 
{gg 
Messagegg #
=gg$ %
$strgg& A
}ggB C
)ggC D
;ggD E
}jj 	
[mm 	

HttpDeletemm	 
]mm 
publicnn 
asyncnn 
Tasknn 
<nn 
IActionResultnn '
>nn' (
DeleteAllBlogsnn) 7
(nn7 8
)nn8 9
{oo 	
varqq 
blogsToBeDeletedqq  
=qq! "
awaitqq# (
_blogDeleteServiceqq) ;
.qq; <
DeleteAllBlogsqq< J
(qqJ K
)qqK L
;qqL M
ifss 
(ss 
!ss 
blogsToBeDeletedss !
)ss! "
{tt 
returnuu 
NotFounduu 
(uu  
$struu  :
)uu: ;
;uu; <
}vv 
returnxx 
Okxx 
(xx 
$strxx 6
)xx6 7
;xx7 8
}{{ 	
}~~ 
} ¿[
{C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Controllers\AuthorController.cs
	namespace 	
BlogApi2_backend
 
. 
Controllers &
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
AuthorController !
:" #
ControllerBase$ 2
{ 
private 
readonly 
IAuthorService '
_authorService( 6
;6 7
private 
readonly 
IAuthorWriteService ,
_authorWriteService- @
;@ A
private 
static 
int &
GetStatusCodeFromException 5
(5 6
	Exception6 ?
exp@ C
)C D
{ 	
switch 
( 
exp 
) 
{ 
case 
SqliteException $
_% &
:& '
return( .
(/ 0
int0 3
)3 4
HttpStatusCode4 B
.B C
InternalServerErrorC V
;V W
case 
ArgumentException &
_' (
:( )
return* 0
(1 2
int2 5
)5 6
HttpStatusCode6 D
.D E

BadRequestE O
;O P
case %
InvalidOperationException .
_/ 0
:0 1
return2 8
(9 :
int: =
)= >
HttpStatusCode> L
.L M

BadRequestM W
;W X
case 
TimeoutException %
_& '
:' (
return) /
(0 1
int1 4
)4 5
HttpStatusCode5 C
.C D
RequestTimeoutD R
;R S
default 
: 
return 
(  !
int! $
)$ %
HttpStatusCode% 3
.3 4
InternalServerError4 G
;G H
} 
} 	
public 
AuthorController 
(  
IAuthorService  .
authorService/ <
,< =
IAuthorWriteService> Q
authorWriteServiceR d
)d e
{ 	
_authorService!! 
=!! 
authorService!! *
;!!* +
_authorWriteService"" 
=""  !
authorWriteService""" 4
;""4 5
}$$ 	
['' 	
HttpGet''	 
]'' 
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (

GetAuthors(() 3
(((3 4
)((4 5
{)) 	
var** 
authors** 
=** 
await** 
_authorService**  .
.**. /
GetAllAuthors**/ <
(**< =
)**= >
;**> ?
return++ 
Ok++ 
(++ 
authors++ 
)++ 
;++ 
},, 	
[// 	
HttpGet//	 
(// 
$str// 
)// 
]// 
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
GetAuthorById00) 6
(006 7
int007 :
id00; =
)00= >
{11 	
try22 
{33 
var44 
author44 
=44 
await44 "
_authorService44# 1
.441 2
GetAuthorById442 ?
(44? @
id44@ B
)44B C
;44C D
if66 
(66 
author66 
==66 
null66 "
)66" #
{77 
return88 
NotFound88 #
(88# $
new88$ '
{88( )
Message88* 1
=882 3
$str884 F
}88G H
)88H I
;88I J
}99 
return;; 
Ok;; 
(;; 
author;;  
);;  !
;;;! "
}<< 
catch== 
(== 
	Exception== 
ex== 
)==  
{>> 
var?? 

statusCode?? 
=??  &
GetStatusCodeFromException??! ;
(??; <
ex??< >
)??> ?
;??? @
return@@ 

StatusCode@@ !
(@@! "

statusCode@@" ,
,@@, -
new@@. 1
{@@2 3
message@@4 ;
=@@< =
$str@@> N
,@@N O
details@@P W
=@@X Y
ex@@Z \
.@@\ ]
Message@@] d
}@@e f
)@@f g
;@@g h
}AA 
}BB 	
[EE 	
HttpGetEE	 
(EE 
$strEE 
)EE 
]EE 
publicFF 
asyncFF 
TaskFF 
<FF 
IActionResultFF '
>FF' (
	GetAuthorFF) 2
(FF2 3
[FF3 4
	FromQueryFF4 =
]FF= >
stringFF? E
nameFFF J
)FFJ K
{GG 	
tryHH 
{II 
varJJ 
authorJJ 
=JJ 
awaitJJ "
_authorServiceJJ# 1
.JJ1 2
GetAuthorByNameJJ2 A
(JJA B
nameJJB F
)JJF G
;JJG H
ifKK 
(KK 
authorKK 
==KK 
nullKK "
)KK" #
{LL 
returnMM 
NotFoundMM #
(MM# $
newMM$ '
{MM( )
MessageMM* 1
=MM2 3
$strMM4 F
}MMG H
)MMH I
;MMI J
}NN 
returnPP 
OkPP 
(PP 
authorPP  
)PP  !
;PP! "
}QQ 
catchRR 
(RR 
	ExceptionRR 
exRR 
)RR  
{SS 
varTT 

statusCodeTT 
=TT  &
GetStatusCodeFromExceptionTT! ;
(TT; <
exTT< >
)TT> ?
;TT? @
returnUU 

StatusCodeUU !
(UU! "

statusCodeUU" ,
,UU, -
newUU. 1
{UU2 3
messageUU4 ;
=UU< =
$strUU> N
,UUN O
detailsUUP W
=UUX Y
exUUZ \
.UU\ ]
MessageUU] d
}UUe f
)UUf g
;UUg h
}VV 
}WW 	
[ZZ 	
HttpPostZZ	 
(ZZ 
$strZZ 
)ZZ 
]ZZ 
public[[ 
async[[ 
Task[[ 
<[[ 
IActionResult[[ '
>[[' (
Login[[) .
([[. /
[[[/ 0
FromBody[[0 8
][[8 9
LoginDto[[: B
loginDto[[C K
)[[K L
{\\ 	
try]] 
{^^ 
if__ 
(__ 
loginDto__ 
==__ 
null__  $
||__% '
string__( .
.__. /
IsNullOrWhiteSpace__/ A
(__A B
loginDto__B J
.__J K
Email__K P
)__P Q
||__R T
string__U [
.__[ \
IsNullOrWhiteSpace__\ n
(__n o
loginDto__o w
.__w x
Password	__x Ä
)
__Ä Å
)
__Å Ç
{`` 
returnaa 

BadRequestaa %
(aa% &
newaa& )
{aa* +
Messageaa, 3
=aa4 5
$straa6 X
}aaY Z
)aaZ [
;aa[ \
}bb 
vardd 
authordd 
=dd 
awaitdd "
_authorWriteServicedd# 6
.dd6 7
LoginAuthordd7 B
(ddB C
loginDtoddC K
)ddK L
;ddL M
ifee 
(ee 
authoree 
==ee 
nullee "
)ee" #
{ff 
returngg 
Unauthorizedgg '
(gg' (
newgg( +
{gg, -
Messagegg. 5
=gg6 7
$strgg8 M
}ggN O
)ggO P
;ggP Q
}hh 
returnjj 
Okjj 
(jj 
newjj 
{jj 
Messagejj  '
=jj( )
$strjj* <
,jj< =
AuthorIdjj> F
=jjG H
authorjjI O
.jjO P
IdjjP R
,jjR S
NamejjT X
=jjY Z
authorjj[ a
.jja b
Namejjb f
}jjg h
)jjh i
;jji j
}kk 
catchll 
(ll 
	Exceptionll 
exll 
)ll  
{mm 
returnnn 
Unauthorizednn #
(nn# $
newnn$ '
{nn( )
Messagenn* 1
=nn2 3
$strnn4 I
+nnJ K
exnnL N
.nnN O
MessagennO V
}nnW X
)nnX Y
;nnY Z
}oo 
}pp 	
[tt 	
HttpPosttt	 
(tt 
$strtt 
)tt 
]tt 
publicuu 
asyncuu 
Taskuu 
<uu 
IActionResultuu '
>uu' (
Registeruu) 1
(uu1 2
[uu2 3
FromBodyuu3 ;
]uu; <
	AddAuthoruu= F
	addAuthoruuG P
)uuP Q
{vv 	
tryww 
{xx 
varyy 
	newauthoryy 
=yy 
awaityy  %
_authorWriteServiceyy& 9
.yy9 :
RegisterAuthoryy: H
(yyH I
	addAuthoryyI R
)yyR S
;yyS T
return{{ 
CreatedAtAction{{ &
({{& '
nameof{{' -
({{- .

GetAuthors{{. 8
){{8 9
,{{9 :
new{{; >
{{{? @
id{{A C
={{D E
	newauthor{{F O
.{{O P
Id{{P R
}{{S T
,{{T U
	newauthor{{V _
){{_ `
;{{` a
}|| 
catch}} 
(}} 
	Exception}} 
ex}} 
)}}  
{~~ 
return 

BadRequest !
(! "
new" %
{& '
message( /
=0 1
ex2 4
.4 5
Message5 <
}= >
)> ?
;? @
}
ÄÄ 
}
ÅÅ 	
[
ÜÜ 	
HttpPut
ÜÜ	 
(
ÜÜ 
$str
ÜÜ 
)
ÜÜ 
]
ÜÜ 
public
áá 
async
áá 
Task
áá 
<
áá 
IActionResult
áá '
>
áá' (
UpdateAuthor
áá) 5
(
áá5 6
int
áá6 9
id
áá: <
,
áá< =
[
áá> ?
FromBody
áá? G
]
ááG H
UpdateAuthorDto
ááI X
updateAuthorDto
ááY h
)
ááh i
{
àà 	
try
ââ 
{
ää 
var
åå 
updatedAuthor
åå !
=
åå" #
await
åå$ )!
_authorWriteService
åå* =
.
åå= > 
UpdateDetailAuthor
åå> P
(
ååP Q
id
ååQ S
,
ååS T
updateAuthorDto
ååU d
)
ååd e
;
ååe f
return
éé 
Ok
éé 
(
éé 
new
éé 
{
éé 
Message
éé  '
=
éé( )
$str
éé* O
,
ééO P
Author
ééQ W
=
ééX Y
updatedAuthor
ééZ g
}
ééh i
)
ééi j
;
ééj k
}
èè 
catch
êê 
(
êê 
	Exception
êê 
ex
êê 
)
êê  
{
ëë 
return
íí 
NotFound
íí 
(
íí  
new
íí  #
{
íí$ %
Message
íí& -
=
íí. /
ex
íí0 2
.
íí2 3
Message
íí3 :
}
íí; <
)
íí< =
;
íí= >
}
ìì 
}
îî 	
}
ññ 
}òò ±	
C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Configuration\BlogResponseMapper.cs
	namespace 	
BlogApi2_backend
 
. 
Configuration (
{ 
public 

static 
class 
BlogResponseMapper *
{ 
public 
static 
object 
MapToResponse *
(* +
Blog+ /
blog0 4
)4 5
{ 	
return		 
new		 
{

 
blog 
. 
Id 
, 
blog 
. 
Title 
, 
blog 
. 
Content 
, 
blog 
. 
	CreatedAt 
, 

AuthorName 
= 
blog !
.! "
Author" (
!=) +
null, 0
?1 2
blog3 7
.7 8
Author8 >
.> ?
Name? C
:D E
stringF L
.L M
EmptyM R
} 
; 
} 	
} 
} î
}C:\Users\2020677\Music\Blog_project_new2\Blog_project_web\BlogApi2_backend\BlogApi2_backend\Configuration\AutoMapperConfig.cs
	namespace 	
BlogApi2_backend
 
. 
Configuration (
{ 
public 

class 
AutoMapperConfig !
:" #
Profile$ +
{ 
public		 
AutoMapperConfig		 
(		  
)		  !
{

 	
	CreateMap 
< 

AddComment  
,  !
Comments" *
>* +
(+ ,
), -
.- .

ReverseMap. 8
(8 9
)9 :
;: ;
	CreateMap 
< 
Blog 
, 
GetBlogTitleDto +
>+ ,
(, -
)- .
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (

AuthorName( 2
,2 3
opt4 7
=>8 :
opt; >
.> ?
MapFrom? F
(F G
srcG J
=>K M
srcN Q
.Q R
AuthorR X
!=Y [
null\ `
?a b
srcc f
.f g
Authorg m
.m n
Namen r
:s t
stringu {
.{ |
Empty	| Å
)
Å Ç
)
Ç É
;
É Ñ
	CreateMap 
< 

AddBlogDto  
,  !
Blog" &
>& '
(' (
)( )
.) *

ReverseMap* 4
(4 5
)5 6
;6 7
	CreateMap 
< 
UpdateBlogDto #
,# $
Blog% )
>) *
(* +
)+ ,
., -

ReverseMap- 7
(7 8
)8 9
;9 :
	CreateMap 
< 
Author 
, 
GetAuthorDto *
>* +
(+ ,
), -
. 
	ForMember 
( 
dest 
=> 
dest #
.# $
AuthorId$ ,
,, -
opt. 1
=>2 4
opt5 8
.8 9
MapFrom9 @
(@ A
srcA D
=>E G
srcH K
.K L
IdL N
)N O
)O P
. 
	ForMember 
( 
dest 
=> 
dest #
.# $

AuthorName$ .
,. /
opt0 3
=>4 6
opt7 :
.: ;
MapFrom; B
(B C
srcC F
=>G I
srcJ M
.M N
NameN R
)R S
)S T
. 
	ForMember 
( 
dest 
=> 
dest #
.# $
Blogs$ )
,) *
opt+ .
=>/ 1
opt2 5
.5 6
MapFrom6 =
(= >
src> A
=>B D
srcE H
.H I
BlogsI N
)N O
)O P
;P Q
	CreateMap 
< 
Blog 
, 
BlogDto #
># $
($ %
)% &
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
BlogId( .
,. /
opt0 3
=>4 6
opt7 :
.: ;
MapFrom; B
(B C
srcC F
=>G I
srcJ M
.M N
IdN P
)P Q
)Q R
;R S
	CreateMap 
< 
	AddAuthor 
,  
Author! '
>' (
(( )
)) *
;* +
} 	
} 
} 